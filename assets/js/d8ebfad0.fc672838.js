"use strict";(self.webpackChunkTIL=self.webpackChunkTIL||[]).push([[5565],{3905:function(e,t,n){n.d(t,{Zo:function(){return s},kt:function(){return p}});var a=n(7294);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e,t){if(null==e)return{};var n,a,l=function(e,t){if(null==e)return{};var n,a,l={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(l[n]=e[n]);return l}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}var o=a.createContext({}),c=function(e){var t=a.useContext(o),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},s=function(e){var t=c(e.components);return a.createElement(o.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,l=e.mdxType,r=e.originalType,o=e.parentName,s=m(e,["components","mdxType","originalType","parentName"]),d=c(n),p=l,k=d["".concat(o,".").concat(p)]||d[p]||u[p]||r;return n?a.createElement(k,i(i({ref:t},s),{},{components:n})):a.createElement(k,i({ref:t},s))}));function p(e,t){var n=arguments,l=t&&t.mdxType;if("string"==typeof e||l){var r=n.length,i=new Array(r);i[0]=d;var m={};for(var o in t)hasOwnProperty.call(t,o)&&(m[o]=t[o]);m.originalType=e,m.mdxType="string"==typeof e?e:l,i[1]=m;for(var c=2;c<r;c++)i[c]=n[c];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},182:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return m},contentTitle:function(){return o},metadata:function(){return c},toc:function(){return s},default:function(){return d}});var a=n(7462),l=n(3366),r=(n(7294),n(3905)),i=["components"],m={},o="Model Relationship - 1:N",c={unversionedId:"backend/Django/02-07",id:"backend/Django/02-07",isDocsHomePage:!1,title:"Model Relationship - 1:N",description:"- Foreign Key",source:"@site/docs/backend/Django/02-07.md",sourceDirName:"backend/Django",slug:"/backend/Django/02-07",permalink:"/TIL/docs/backend/Django/02-07",tags:[],version:"current",frontMatter:{},sidebar:"backend",previous:{title:"SQL & ORM",permalink:"/TIL/docs/backend/Django/02-06"},next:{title:"Model Relationship - M:N",permalink:"/TIL/docs/backend/Django/02-08"}},s=[{value:"Foreign Key",id:"foreign-key",children:[{value:"Forein Key",id:"forein-key",children:[{value:"\uac1c\ub150",id:"\uac1c\ub150",children:[],level:4},{value:"\uc608\uc2dc",id:"\uc608\uc2dc",children:[{value:"Article",id:"article",children:[],level:5},{value:"Comment",id:"comment",children:[],level:5}],level:4},{value:"\ud2b9\uc9d5",id:"\ud2b9\uc9d5",children:[],level:4},{value:"Foreign Key field",id:"foreign-key-field",children:[],level:4},{value:"<code>on_delete</code>",id:"on_delete",children:[],level:4},{value:"Migration",id:"migration",children:[],level:4},{value:"\ub370\uc774\ud130\ubca0\uc774\uc2a4\uc758 ForeignKeyField \ud45c\ud604",id:"\ub370\uc774\ud130\ubca0\uc774\uc2a4\uc758-foreignkeyfield-\ud45c\ud604",children:[{value:"articles_comment",id:"articles_comment",children:[],level:5}],level:4},{value:"\ub313\uae00 \uc0dd\uc131 \uc5f0\uc2b5\ud558\uae30",id:"\ub313\uae00-\uc0dd\uc131-\uc5f0\uc2b5\ud558\uae30",children:[],level:4},{value:"1:N \uad00\uacc4 related manager",id:"1n-\uad00\uacc4-related-manager",children:[],level:4},{value:"ForeignKey arguments - <code>related_name</code>",id:"foreignkey-arguments---related_name",children:[],level:4}],level:3},{value:"Comment CREATE",id:"comment-create",children:[{value:"CommentForm \uc791\uc131",id:"commentform-\uc791\uc131",children:[],level:4},{value:"detail \ud398\uc774\uc9c0\uc5d0\uc11c CommentForm \ucd9c\ub825",id:"detail-\ud398\uc774\uc9c0\uc5d0\uc11c-commentform-\ucd9c\ub825",children:[],level:4},{value:"\ub313\uae00 \uc791\uc131 \ub85c\uc9c1",id:"\ub313\uae00-\uc791\uc131-\ub85c\uc9c1",children:[],level:4},{value:"The <code>save()</code> method",id:"the-save-method",children:[],level:4}],level:3},{value:"Comment READ",id:"comment-read",children:[{value:"\ub313\uae00 \ucd9c\ub825",id:"\ub313\uae00-\ucd9c\ub825",children:[],level:4}],level:3},{value:"Comment DELETE",id:"comment-delete",children:[{value:"\uc778\uc99d\ub41c \uc0ac\uc6a9\uc790\uc758 \uacbd\uc6b0\ub9cc \ub313\uae00 \uc791\uc131 \ubc0f \uc0ad\uc81c",id:"\uc778\uc99d\ub41c-\uc0ac\uc6a9\uc790\uc758-\uacbd\uc6b0\ub9cc-\ub313\uae00-\uc791\uc131-\ubc0f-\uc0ad\uc81c",children:[],level:4}],level:3},{value:"Comment \ucd94\uac00 \uc0ac\ud56d",id:"comment-\ucd94\uac00-\uc0ac\ud56d",children:[{value:"\ub313\uae00 \uac1c\uc218 \ucd9c\ub825\ud558\uae30",id:"\ub313\uae00-\uac1c\uc218-\ucd9c\ub825\ud558\uae30",children:[],level:4},{value:"\ub313\uae00\uc774 \uc5c6\ub294 \uacbd\uc6b0 \ub300\uccb4 \ucee8\ud150\uce20 \ucd9c\ub825",id:"\ub313\uae00\uc774-\uc5c6\ub294-\uacbd\uc6b0-\ub300\uccb4-\ucee8\ud150\uce20-\ucd9c\ub825",children:[],level:4}],level:3},{value:"Customizing authentication in Django",id:"customizing-authentication-in-django",children:[{value:"User \ubaa8\ub378 \ub300\uccb4\ud558\uae30",id:"user-\ubaa8\ub378-\ub300\uccb4\ud558\uae30",children:[],level:4},{value:"AUTH_USER_MODEL",id:"auth_user_model",children:[],level:4},{value:"Custom User \ubaa8\ub378 \uc815\uc758\ud558\uae30",id:"custom-user-\ubaa8\ub378-\uc815\uc758\ud558\uae30",children:[],level:4}],level:3},{value:"Custom user &amp; Built-in auth forms",id:"custom-user--built-in-auth-forms",children:[{value:"<code>get_user_model()</code>",id:"get_user_model",children:[],level:4}],level:3}],level:2},{value:"1:N Relationship",id:"1n-relationship",children:[{value:"User - Article (1:N)",id:"user---article-1n",children:[{value:"User \ubaa8\ub378 \ucc38\uc870\ud558\uae30",id:"user-\ubaa8\ub378-\ucc38\uc870\ud558\uae30",children:[],level:4},{value:"User\uc640 Article \uac04 \ubaa8\ub378 \uad00\uacc4 \uc815\uc758 \ud6c4 migration",id:"user\uc640-article-\uac04-\ubaa8\ub378-\uad00\uacc4-\uc815\uc758-\ud6c4-migration",children:[],level:4},{value:"\uac8c\uc2dc\uae00 \ucd9c\ub825 \ud544\ub4dc \uc218\uc815",id:"\uac8c\uc2dc\uae00-\ucd9c\ub825-\ud544\ub4dc-\uc218\uc815",children:[],level:4},{value:"CREATE : NOT NULL constraint failed ERROR \uc218\uc815",id:"create--not-null-constraint-failed-error-\uc218\uc815",children:[],level:4},{value:"DELETE \uc218\uc815",id:"delete-\uc218\uc815",children:[],level:4},{value:"UPDATE \uc218\uc815",id:"update-\uc218\uc815",children:[],level:4},{value:"READ \uc218\uc815",id:"read-\uc218\uc815",children:[],level:4}],level:3},{value:"User - Comment (1:N)",id:"user---comment-1n",children:[{value:"User\uc640 Comment \uac04 \ubaa8\ub378 \uad00\uacc4 \uc815\uc758 \ud6c4 migration",id:"user\uc640-comment-\uac04-\ubaa8\ub378-\uad00\uacc4-\uc815\uc758-\ud6c4-migration",children:[],level:4},{value:"\ub313\uae00 \ucd9c\ub825 \ud544\ub4dc \uc218\uc815",id:"\ub313\uae00-\ucd9c\ub825-\ud544\ub4dc-\uc218\uc815",children:[],level:4},{value:"CREATE: NOT NULL constraint failed ERROR \uc218\uc815",id:"create-not-null-constraint-failed-error-\uc218\uc815",children:[],level:4},{value:"READ \uc218\uc815",id:"read-\uc218\uc815-1",children:[],level:4},{value:"DELETE \uc218\uc815",id:"delete-\uc218\uc815-1",children:[],level:4}],level:3}],level:2},{value:"\ub9c8\ubb34\ub9ac",id:"\ub9c8\ubb34\ub9ac",children:[],level:2}],u={toc:s};function d(e){var t=e.components,n=(0,l.Z)(e,i);return(0,r.kt)("wrapper",(0,a.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"model-relationship---1n"},"Model Relationship - 1:N"),(0,r.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"\ubaa9\ucc28")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("ul",{parentName:"div"},(0,r.kt)("li",{parentName:"ul"},"Foreign Key",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Comment CREATE"),(0,r.kt)("li",{parentName:"ul"},"Comment READ"),(0,r.kt)("li",{parentName:"ul"},"Comment DELETE"))),(0,r.kt)("li",{parentName:"ul"},"Customizing authentication in Django",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Substituting a custom User model"),(0,r.kt)("li",{parentName:"ul"},"Custom user & Built-in auth forms"))),(0,r.kt)("li",{parentName:"ul"},"1:N relationship")))),(0,r.kt)("br",null),(0,r.kt)("h2",{id:"foreign-key"},"Foreign Key"),(0,r.kt)("h3",{id:"forein-key"},"Forein Key"),(0,r.kt)("h4",{id:"\uac1c\ub150"},"\uac1c\ub150"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\uc678\ub798 \ud0a4 (\uc678\ubd80 \ud0a4)"),(0,r.kt)("li",{parentName:"ul"},"\uad00\uacc4\ud615 \ub370\uc774\ud130\ubca0\uc774\uc2a4\uc5d0\uc11c \ud55c \ud14c\uc774\ube14\uc758 \ud544\ub4dc \uc911 \ub2e4\ub978 \ud14c\uc774\ube14\uc758 \ud589\uc744 \uc2dd\ubcc4\ud560 \uc218 \uc788\ub294 \ud0a4"),(0,r.kt)("li",{parentName:"ul"},"\ucc38\uc870\ud558\ub294 \ud14c\uc774\ube14\uc5d0\uc11c 1\uac1c\uc758 \ud0a4 (\uc18d\uc131 \ub610\ub294 \uc18d\uc131\uc758 \uc9d1\ud569)\uc5d0 \ud574\ub2f9\ud558\uace0, \uc774\ub294 \ucc38\uc870\ub418\ub294 \uce21 \ud14c\uc774\ube14\uc758 \uae30\ubcf8 \ud0a4 (Primary Key)\ub97c \uac00\ub9ac\ud0b4."),(0,r.kt)("li",{parentName:"ul"},"\ucc38\uc870\ud558\ub294 \ud14c\uc774\ube14\uc758 \ud589 1\uac1c\uc758 \uac12\uc740, \ucc38\uc870\ub418\ub294 \uce21 \ud14c\uc774\ube14\uc758 \ud589 \uac12\uc5d0 \ub300\uc751\ub428.",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\uc774 \ub54c\ubb38\uc5d0 \ucc38\uc870\ud558\ub294 \ud14c\uc774\ube14\uc758 \ud589\uc5d0\ub294, \ucc38\uc870\ub418\ub294 \ud14c\uc774\ube14\uc5d0 \ub098\ud0c0\ub098\uc9c0 \uc54a\ub294 \uac12\uc744 \ud3ec\ud568\ud560 \uc218 \uc5c6\uc74c."))),(0,r.kt)("li",{parentName:"ul"},"\ucc38\uc870\ud558\ub294 \ud14c\uc774\ube14\uc758 \ud589 \uc5ec\ub7ec \uac1c\uac00, \ucc38\uc870\ub418\ub294 \ud14c\uc774\ube14\uc758 \ub3d9\uc77c\ud55c \ud589\uc744 \ucc38\uc870\ud560 \uc218 \uc788\uc74c.")),(0,r.kt)("br",null),(0,r.kt)("h4",{id:"\uc608\uc2dc"},"\uc608\uc2dc"),(0,r.kt)("p",null,"\uac8c\uc2dc\uae00(Article)\uacfc \ub313\uae00(Comment) \uac04\uc758 \ubaa8\ub378 \uad00\uacc4 \uc124\uc815"),(0,r.kt)("br",null),(0,r.kt)("h5",{id:"article"},"Article"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"center"},"id"),(0,r.kt)("th",{parentName:"tr",align:"center"},"title"),(0,r.kt)("th",{parentName:"tr",align:"center"},"content"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"center"},"1"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\uc81c\ubaa91"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\ub0b4\uc6a91")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"center"},"2"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\uc81c\ubaa92"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\ub0b4\uc6a92")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"center"},"3"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\uc81c\ubaa93"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\ub0b4\uc6a93")))),(0,r.kt)("br",null),(0,r.kt)("h5",{id:"comment"},"Comment"),(0,r.kt)("p",null,"\ucc38\uc870\ud558\ub294 \ubaa8\ub378(Comment)\uc5d0\uc11c \uc678\ub798 \ud0a4\ub294 \ucc38\uc870\ub418\ub294 \uce21 \ubaa8\ub378(Article)\uc758 \uae30\ubcf8 \ud0a4(Primary Key)\ub97c \uac00\ub9ac\ud0b4"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"center"},"id"),(0,r.kt)("th",{parentName:"tr",align:"center"},"content"),(0,r.kt)("th",{parentName:"tr",align:"center"},"foreign key"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"center"},"1"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\ub313\uae001"),(0,r.kt)("td",{parentName:"tr",align:"center"},"3")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"center"},"2"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\ub313\uae002"),(0,r.kt)("td",{parentName:"tr",align:"center"},"1")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"center"},"3"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\ub313\uae003"),(0,r.kt)("td",{parentName:"tr",align:"center"},"1")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"center"},"4"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\ub313\uae004"),(0,r.kt)("td",{parentName:"tr",align:"center"},"2")))),(0,r.kt)("br",null),(0,r.kt)("h4",{id:"\ud2b9\uc9d5"},"\ud2b9\uc9d5"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\ud0a4\ub97c \uc0ac\uc6a9\ud558\uc5ec \ubd80\ubaa8 \ud14c\uc774\ube14\uc758 \uc720\uc77c\ud55c \uac12\uc744 \ucc38\uc870 (\ucc38\uc870 \ubb34\uacb0\uc131)"),(0,r.kt)("li",{parentName:"ul"},"\uc678\ub798 \ud0a4\uc758 \uac12\uc774 \ubc18\ub4dc\uc2dc \ubd80\ubaa8 \ud14c\uc774\ube14\uc758 \uae30\ubcf8 \ud0a4\uc77c \ud544\uc694\ub294 \uc5c6\uc9c0\ub9cc \uc720\uc77c\ud55c \uac12\uc774\uc5b4\uc57c \ud568.")),(0,r.kt)("br",null),(0,r.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"[\ucc38\uace0]"," \ucc38\uc870 \ubb34\uacb0\uc131")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("ul",{parentName:"div"},(0,r.kt)("li",{parentName:"ul"},"\ub370\uc774\ud130\ubca0\uc774\uc2a4 \uad00\uacc4 \ubaa8\ub378\uc5d0\uc11c \uad00\ub828\ub41c 2\uac1c\uc758 \ud14c\uc774\ube14 \uac04\uc758 \uc77c\uad00\uc131\uc744 \ub9d0\ud568."),(0,r.kt)("li",{parentName:"ul"},"\uc678\ub798 \ud0a4\uac00 \uc120\uc5b8\ub41c \ud14c\uc774\ube14\uc758 \uc678\ub798 \ud0a4 \uc18d\uc131(\uc5f4)\uc758 \uac12\uc740 \uadf8 \ud14c\uc774\ube14\uc758 \ubd80\ubaa8\uac00 \ub418\ub294 \ud14c\uc774\ube14\uc758 \uae30\ubcf8 \ud0a4 \uac12\uc73c\ub85c \uc874\uc7ac\ud574\uc57c \ud568.")))),(0,r.kt)("br",null),(0,r.kt)("h4",{id:"foreign-key-field"},"Foreign Key field"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"A many-to-one relationship"),(0,r.kt)("li",{parentName:"ul"},"2\uac1c\uc758 \uc704\uce58 \uc778\uc790\uac00 \ubc18\ub4dc\uc2dc \ud544\uc694",(0,r.kt)("ol",{parentName:"li"},(0,r.kt)("li",{parentName:"ol"},"\ucc38\uc870\ud558\ub294 model class"),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"on_delete")," \uc635\uc158"))),(0,r.kt)("li",{parentName:"ul"},"migrate \uc791\uc5c5 \uc2dc \ud544\ub4dc \uc774\ub984\uc5d0 ",(0,r.kt)("inlineCode",{parentName:"li"},"_id"),"\ub97c \ucd94\uac00\ud558\uc5ec \ub370\uc774\ud130\ubca0\uc774\uc2a4 \uc5f4 \uc774\ub984\uc744 \ub9cc\ub4e6.")),(0,r.kt)("br",null),(0,r.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"[\ucc38\uace0]"," \uc7ac\uadc0 \uad00\uacc4 (\uc790\uc2e0\uacfc 1:N)")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("pre",{parentName:"div"},(0,r.kt)("code",{parentName:"pre",className:"language-python"},"models.ForeignKey('self', on_delete=models.CASCADE)\n")))),(0,r.kt)("br",null),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"comment \ubaa8\ub378 \uc815\uc758\ud558\uae30")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"# articles/models.py\n\nclass Comment(models.Model):\n    article = models.ForeignKey(Article, on_delete=models.CASCADE)\n    content = models.CharField(max_length=200)\n    created_at = models.DateTimeField(auto_now_add=True)\n    updated_at = models.DateTimeField(auto_now=True)\n\n    def __str__(self):\n        return self.content\n")),(0,r.kt)("br",null),(0,r.kt)("h4",{id:"on_delete"},(0,r.kt)("inlineCode",{parentName:"h4"},"on_delete")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\uc678\ub798 \ud0a4\uac00 \ucc38\uc870\ud558\ub294 \uac1d\uccb4\uac00 \uc0ac\ub77c\uc84c\uc744 \ub54c \uc678\ub798 \ud0a4\ub97c \uac00\uc9c4 \uac1d\uccb4\ub97c \uc5b4\ub5bb\uac8c \ucc98\ub9ac\ud560\uc9c0\ub97c \uc815\uc758"),(0,r.kt)("li",{parentName:"ul"},"Database Integrity(\ub370\uc774\ud130 \ubb34\uacb0\uc131)\uc744 \uc704\ud574\uc11c \ub9e4\uc6b0 \uc911\uc694\ud55c \uc124\uc815"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"on_delete")," \uc635\uc158\uc5d0 \uc0ac\uc6a9 \uac00\ub2a5\ud55c \uac12\ub4e4",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"CASCADE : \ubd80\ubaa8 \uac1d\uccb4 (\ucc38\uc870\ub41c \uac1d\uccb4)\uac00 \uc0ad\uc81c \ub410\uc744 \ub54c \uc774\ub97c \ucc38\uc870\ud558\ub294 \uac1d\uccb4\ub3c4 \uc0ad\uc81c"),(0,r.kt)("li",{parentName:"ul"},"PRODUCT"),(0,r.kt)("li",{parentName:"ul"},"SET_NULL"),(0,r.kt)("li",{parentName:"ul"},"SET_DEFAULT"),(0,r.kt)("li",{parentName:"ul"},"SET()"),(0,r.kt)("li",{parentName:"ul"},"DO_NOTHING"),(0,r.kt)("li",{parentName:"ul"},"RESTRICT")))),(0,r.kt)("br",null),(0,r.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"[\ucc38\uace0]"," \ub370\uc774\ud130 \ubb34\uacb0\uc131")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("ul",{parentName:"div"},(0,r.kt)("li",{parentName:"ul"},"\ub370\uc774\ud130\uc758 \uc815\ud655\uc131\uacfc \uc77c\uad00\uc131\uc744 \uc720\uc9c0\ud558\uace0 \ubcf4\uc99d\ud558\ub294 \uac83\uc744 \uac00\ub9ac\ud0a4\uba70, \ub370\uc774\ud130\ubca0\uc774\uc2a4\ub098 RDBMS \uc2dc\uc2a4\ud15c\uc758 \uc911\uc694\ud55c \uae30\ub2a5\uc784."),(0,r.kt)("li",{parentName:"ul"},"\ubb34\uacb0\uc131 \uc81c\ud55c\uc758 \uc720\ud615",(0,r.kt)("ol",{parentName:"li"},(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("strong",{parentName:"li"},"\uac1c\uccb4 \ubb34\uacb0\uc131")," (Entity integrity)",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"PK\uc758 \uac1c\ub150\uacfc \uad00\ub828"),(0,r.kt)("li",{parentName:"ul"},"\ubaa8\ub4e0 \ud14c\uc774\ube14\uc758 PK\ub97c \uac00\uc838\uc57c \ud558\uba70 PK\ub85c \uc120\ud0dd\ub41c \uc5f4\uc740 \uace0\uc720\ud55c \uac12\uc774\uc5b4\uc57c \ud558\uace0 \ube48 \uac12\uc740 \ud5c8\uc6a9\uce58 \uc54a\uc74c\uc744 \uaddc\uc815"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("strong",{parentName:"li"},"\ucc38\uc870 \ubb34\uacb0\uc131")," (Referential integrity)",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"FK(\uc678\ub798 \ud0a4) \uac1c\ub150\uacfc \uad00\ub828"),(0,r.kt)("li",{parentName:"ul"},"FK \uac12\uc774 \ub370\uc774\ud130\ubca0\uc774\uc2a4\uc758 \ud2b9\uc815 \ud14c\uc774\ube14\uc758 PK \uac12\uc744 \ucc38\uc870\ud558\ub294 \uac83"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("strong",{parentName:"li"},"\ubc94\uc704 (\ub3c4\uba54\uc778) \ubb34\uacb0\uc131")," (Domain integrity)",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\uc815\uc758\ub41c \ud615\uc2dd(\ubc94\uc704)\uc5d0\uc11c \uad00\uacc4\ud615 \ub370\uc774\ud130\ubca0\uc774\uc2a4\uc758 \ubaa8\ub4e0 \uce7c\ub7fc\uc774 \uc120\uc5b8\ub418\ub3c4\ub85d \uaddc\uc815")))))))),(0,r.kt)("br",null),(0,r.kt)("h4",{id:"migration"},"Migration"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"migrations")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"$ python manage.py makemigraions\n$ python manage.py migrate\n")),(0,r.kt)("ol",{start:2},(0,r.kt)("li",{parentName:"ol"},"articles_comment \ud14c\uc774\ube14\uc758 \uc678\ub798 \ud0a4 \uce7c\ub7fc \ud655\uc778 (\ud544\ub4dc \uc774\ub984\uc5d0 ",(0,r.kt)("inlineCode",{parentName:"li"},"_id"),"\uac00 \ucd94\uac00\ub428)",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"article_id"))))),(0,r.kt)("br",null),(0,r.kt)("h4",{id:"\ub370\uc774\ud130\ubca0\uc774\uc2a4\uc758-foreignkeyfield-\ud45c\ud604"},"\ub370\uc774\ud130\ubca0\uc774\uc2a4\uc758 ForeignKeyField \ud45c\ud604"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\ub9cc\uc57d ForeignKey \uc778\uc2a4\ud134\uc2a4\ub97c abcd\ub85c \uc0dd\uc131\ud588\ub2e4\uba74 ",(0,r.kt)("inlineCode",{parentName:"li"},"abcd_id"),"\ub85c \ub9cc\ub4e4\uc5b4\uc9d0."),(0,r.kt)("li",{parentName:"ul"},"\ud558\uc9c0\ub9cc \uba85\uc2dc\uc801\uc778 \ubaa8\ub378 \uad00\uacc4 \ud30c\uc545\uc744 \uc704\ud574 \ucc38\uc870\ud558\ub294 \ud074\ub798\uc2a4 \uc774\ub984\uc758 \uc18c\ubb38\uc790(\ub2e8\uc218\ud615)\ub85c \uc791\uc131\ud558\ub294 \uac83\uc774 \ubc14\ub78c\uc9c1\ud568 (1:N)")),(0,r.kt)("br",null),(0,r.kt)("h5",{id:"articles_comment"},"articles_comment"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"center"},"id"),(0,r.kt)("th",{parentName:"tr",align:"center"},"content"),(0,r.kt)("th",{parentName:"tr",align:"center"},"article_id"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"center"},"1"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\ub313\uae001"),(0,r.kt)("td",{parentName:"tr",align:"center"},"3")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"center"},"2"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\ub313\uae002"),(0,r.kt)("td",{parentName:"tr",align:"center"},"1")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"center"},"3"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\ub313\uae003"),(0,r.kt)("td",{parentName:"tr",align:"center"},"1")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"center"},"4"),(0,r.kt)("td",{parentName:"tr",align:"center"},"\ub313\uae004"),(0,r.kt)("td",{parentName:"tr",align:"center"},"2")))),(0,r.kt)("br",null),(0,r.kt)("h4",{id:"\ub313\uae00-\uc0dd\uc131-\uc5f0\uc2b5\ud558\uae30"},"\ub313\uae00 \uc0dd\uc131 \uc5f0\uc2b5\ud558\uae30"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\ub313\uae00 \uc0dd\uc131 \uc2dc\ub3c4")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"$ python manage.py shell_plus\n\nIn [1]: comment = Comment()\nIn [2]: comment.content = 'first comment'\nIn [3]: comment.save()\n----------------------------------------------------------------------------------\nIntrgrityError: NOT NULL constraint failed: articles_comment.article_id\n")),(0,r.kt)("br",null),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\uc5d0\ub7ec \ud655\uc778",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"articles_comment \ud14c\uc774\ube14\uc758 ForeignKeyField, article_id \uac12\uc774 \ub204\ub77d\ub418\uc5c8\uae30 \ub54c\ubb38")))),(0,r.kt)("br",null),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\uac8c\uc2dc\uae00 \uc0dd\uc131 \ud6c4 \ub313\uae00 \uc0dd\uc131 \uc7ac\uc2dc\ub3c4")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"In [4]: article = Article.objects.create(title='title', content='content')\n\nIn [5]: article = Article.objects.get(pk=1)\n\nIn [6]: article\nOut[6]: <Article: title>\n\nIn [7]: comment.article = article\n\nIn [8]: comment.save()\n\nIn [9]: comment\nOut[9]: <Comment: first comment>\n\nIn [10]: comment.pk\nOut[10]: 1\n")),(0,r.kt)("br",null),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\ub313\uae00 \uc18d\uc131 \uac12 \ud655\uc778",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\uc2e4\uc81c\ub85c \uc791\uc131\ub41c \uc678\ub798 \ud0a4 \uce7c\ub7fc\uba85 ",(0,r.kt)("inlineCode",{parentName:"li"},"article_id")," \uc774\uae30 \ub54c\ubb38\uc5d0 ",(0,r.kt)("inlineCode",{parentName:"li"},"article_pk"),"\ub85c\ub294 \uac12\uc5d0 \uc811\uadfc\ud560 \uc218 \uc5c6\uc74c")))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"In [11]: comment.content\nOut[11]: 'first comment'\n\nIn [12]: comment.article_id\nOut[12]: 1\n\nIn [13]: comment.article\nOut[13]: <Article: title>\n")),(0,r.kt)("br",null),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"comment \uc778\uc2a4\ud134\uc2a4\ub97c \ud1b5\ud55c article \uac12 \uc811\uadfc")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"In [14]: comment.article.pk\nOut[14]: 1\n\nIn [15]: comment.article.content\nOut[15]: 'content'\n")),(0,r.kt)("br",null),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\ub450\ubc88\uc9f8 \ub313\uae00 \uc791\uc131 \ud574\ubcf4\uae30")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"In [16]: comment = Comment(content='second comment', article=article)\n\nIn [17]: comment.save()\n\nIn [18]: comment.pk\nOut[18]: 2\n\nIn [19]: comment.article_id\nOut[19]: 1\n")),(0,r.kt)("br",null),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"admin site \uc5d0\uc11c \uc791\uc131\ub41c \ub313\uae00 \ud655\uc778")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"# articles/admin.py\n\nfrom .models import Article, Comment\n\nadmin.site.register(Comment)\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"$ python manage.py createsuperuser\n")),(0,r.kt)("br",null),(0,r.kt)("h4",{id:"1n-\uad00\uacc4-related-manager"},"1:N \uad00\uacc4 related manager"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\uc5ed\ucc38\uc870(",(0,r.kt)("inlineCode",{parentName:"li"},"comment_set"),")",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Article(1) \u2192 Comment(N)"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"article.comment")," \ud615\ud0dc\ub85c\ub294 \uc0ac\uc6a9\ud560 \uc218 \uc5c6\uace0, ",(0,r.kt)("inlineCode",{parentName:"li"},"article.comment_set")," manager\uac00 \uc0dd\uc131\ub428"),(0,r.kt)("li",{parentName:"ul"},"\uac8c\uc2dc\uae00\uc5d0 \uba87 \uac1c\uc758 \ub313\uae00\uc774 \uc791\uc131\ub418\uc5c8\ub294\uc9c0 Django ORM\uc774 \ubcf4\uc7a5\ud560 \uc218 \uc5c6\uae30 \ub54c\ubb38",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"article\uc740 comment\uac00 \uc788\uc744 \uc218\ub3c4 \uc788\uace0, \uc5c6\uc744 \uc218\ub3c4 \uc788\uc74c"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\uc2e4\uc81c\ub85c Article \ud074\ub798\uc2a4\uc5d0\ub294 Comment\uc640\uc758 \uc5b4\ub5a0\ud55c \uad00\uacc4\ub3c4 \uc791\uc131\ub418\uc5b4 \uc788\uc9c0 \uc54a\uc74c."))))))),(0,r.kt)("br",null),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\ucc38\uc870 (",(0,r.kt)("inlineCode",{parentName:"li"},"article"),")",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Comment(N) \u2192 Article(1)"),(0,r.kt)("li",{parentName:"ul"},"\ub313\uae00\uc758 \uacbd\uc6b0 \uc5b4\ub5a0\ud55c \ub313\uae00\uc774\ub4e0 \ubc18\ub4dc\uc2dc \uc790\uc2e0\uc774 \ucc38\uc870\ud558\uace0 \uc788\ub294 \uac8c\uc2dc\uae00\uc774 \uc788\uc73c\ubbc0\ub85c, ",(0,r.kt)("inlineCode",{parentName:"li"},"comment.article"),"\uacfc \uac19\uc774 \uc811\uadfc\ud560 \uc218 \uc788\uc74c."),(0,r.kt)("li",{parentName:"ul"},"\uc2e4\uc81c ForeignKeyField \ub610\ud55c Comment \ud074\ub798\uc2a4\uc5d0\uc11c \uc791\uc131\ub428.")))),(0,r.kt)("br",null),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"article\uc758 \uc785\uc7a5\uc5d0\uc11c \ubaa8\ub4e0 \ub313\uae00 \uc870\ud68c\ud558\uae30 (\uc5ed\ucc38\uc870, 1 \u2192 N)")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"In [20]: article.comment_set.all()\nOut[20]: <QuerySet [<Comment: first comment>, <Comment: second comment>]>\n")),(0,r.kt)("br",null),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\uc870\ud68c\ud55c \ubaa8\ub4e0 \ub313\uae00 \ucd9c\ub825\ud558\uae30")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"In [21]: comments = article.comment_set.all()\n\nIn [22]: for comment in comments:\n    ...:        print(comment.content)\nfirst comment\nsecond comment\n")),(0,r.kt)("br",null),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"comment\uc758 \uc785\uc7a5\uc5d0\uc11c \ucc38\uc870\ud558\ub294 \uac8c\uc2dc\uae00 \uc870\ud68c\ud558\uae30 (\ucc38\uc870, N \u2192 1)")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"In [23]: comment = Comment.objects.get(pk=1)\n\nIn [24]: comment.article\nOut[24]: <Article: title>\n\nIn [25]: comment.article.content\nOut[25]: 'content'\n\nIn [26]: comment.article_id\nOut[26]: 1\n")),(0,r.kt)("br",null),(0,r.kt)("h4",{id:"foreignkey-arguments---related_name"},"ForeignKey arguments - ",(0,r.kt)("inlineCode",{parentName:"h4"},"related_name")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\uc5ed\ucc38\uc870 \uc2dc \uc0ac\uc6a9\ud560 \uc774\ub984(",(0,r.kt)("inlineCode",{parentName:"li"},"model_set")," manager)\uc744 \ubcc0\uacbd\ud560 \uc218 \uc788\ub294 \uc635\uc158")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"# articles/models.py\n\nclass Comment(models.Model):\n    article = models.ForeignKey(Article, on_delete=models.CASCADE, related_name='comments')\n    ...\n")),(0,r.kt)("br",null),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\uc704\uc640 \uac19\uc774 \ubcc0\uacbd\ud558\uba74 ",(0,r.kt)("inlineCode",{parentName:"li"},"article.comment_set"),"\uc740 \ub354\uc774\uc0c1 \uc0ac\uc6a9\ud560 \uc218 \uc5c6\uace0, ",(0,r.kt)("inlineCode",{parentName:"li"},"article.comments"),"\ub85c \ub300\uccb4\ub428")),(0,r.kt)("div",{className:"admonition admonition-warning alert alert--danger"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))),"\uc8fc\uc758")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"\uc5ed\ucc38\uc870 \uc2dc \uc0ac\uc6a9\ud560 \uc774\ub984 \uc218\uc815 \ud6c4, migration \uacfc\uc815 \ud544\uc694"))),(0,r.kt)("br",null),(0,r.kt)("h3",{id:"comment-create"},"Comment CREATE"),(0,r.kt)("h4",{id:"commentform-\uc791\uc131"},"CommentForm \uc791\uc131"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"# articles/forms.py\n\nfrom django import forms\nfrom .models import Article, Comment\n\n\nclass CommentForm(forms.ModelForm):\n\n    class Meta:\n        model = Comment\n        fields = '__all__'\n")),(0,r.kt)("br",null),(0,r.kt)("h4",{id:"detail-\ud398\uc774\uc9c0\uc5d0\uc11c-commentform-\ucd9c\ub825"},"detail \ud398\uc774\uc9c0\uc5d0\uc11c CommentForm \ucd9c\ub825"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"# articles/views.py\n\nfrom .forms import ArticleForm, CommentForm\n\n\ndef detail(request, pk):\n    article = get_object_or_404(Article, pk=pk)\n    comment_form = CommentForm()\n    context = {\n        'article': article,\n        'comment_form': comment_form,\n    }\n    return render(request, 'articles/detail.html', context)\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html"},'\x3c!-- articles/detail.html --\x3e\n\n{% extends \'base.html\' %}\n\n{% block content %}\n  ...\n  <a href="{% url \'articles:index\' %}">[back]</a>\n  <hr>\n  <form action="" method="POST">\n    {% csrf_token %}\n    {{ comment_form }}\n    <input type="submit">\n  </form>\n{% endblock content %}\n\n')),(0,r.kt)("br",null),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"ForeignKeyField\ub97c \uc791\uc131\uc790\uac00 \uc9c1\uc811 \uc785\ub825\ud558\ub294 \uc0c1\ud669 \ubc1c\uc0dd"),(0,r.kt)("li",{parentName:"ul"},"CommentForm\uc5d0\uc11c \uc678\ub798 \ud0a4 \ud544\ub4dc \ucd9c\ub825 \uc81c\uc678")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"# articles/forms.py\n\nclass CommentForm(forms.ModelForm):\n\n    class Meta:\n        model = Comment\n        # fields = '__all__'\n        exclude = ('article',)\n")),(0,r.kt)("br",null),(0,r.kt)("h4",{id:"\ub313\uae00-\uc791\uc131-\ub85c\uc9c1"},"\ub313\uae00 \uc791\uc131 \ub85c\uc9c1"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"# articles/urls.py\n\nfrom django.urls import path\nfrom . import views\n\n\napp_name = 'articles'\nurlpatterns = [\n    ...\n    path('<int:pk>/comments/', views.comments_create, name='comments_create'),\n]\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"# articles/views.py\n\n@require_POST\ndef comments_create(request, pk):\n    article = get_object_or_404(Article, pk=pk)\n    comment_form = CommentForm(request.POST)\n    if comment_form.is_valid():\n        comment = comment_form.save(commit=False)\n        comment.article = article\n        comment.save()\n    return redirect('articles:detail', article.pk)\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html"},'\x3c!-- articles/detail.html --\x3e\n\n<form action="{% url \'articles:comments_create\' article.pk %}" method="POST">\n  {% csrf_token %}\n  {{ comment_form }}\n  <input type="submit">\n</form>\n')),(0,r.kt)("br",null),(0,r.kt)("h4",{id:"the-save-method"},"The ",(0,r.kt)("inlineCode",{parentName:"h4"},"save()")," method"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"save(commit=False)"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Create, but don't save the new instance."),(0,r.kt)("li",{parentName:"ul"},"\uc544\uc9c1 \ub370\uc774\ud130\ubca0\uc774\uc2a4\uc5d0 \uc800\uc7a5\ub418\uc9c0 \uc54a\uc740 \uc778\uc2a4\ud134\uc2a4\ub97c \ubc18\ud658"),(0,r.kt)("li",{parentName:"ul"},"\uc800\uc7a5\ud558\uae30 \uc804\uc5d0 ",(0,r.kt)("strong",{parentName:"li"},"\uac1d\uccb4\uc5d0 \ub300\ud55c \uc0ac\uc6a9\uc790 \uc9c0\uc815 \ucc98\ub9ac\ub97c \uc218\ud589\ud560 \ub54c")," \uc720\uc6a9\ud558\uac8c \uc0ac\uc6a9.")))),(0,r.kt)("br",null),(0,r.kt)("h3",{id:"comment-read"},"Comment READ"),(0,r.kt)("h4",{id:"\ub313\uae00-\ucd9c\ub825"},"\ub313\uae00 \ucd9c\ub825"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\ud2b9\uc815 article\uc5d0 \uc788\ub294 \ubaa8\ub4e0 \ub313\uae00\uc744 \uac00\uc838\uc628 \ud6c4 context\uc5d0 \ucd94\uac00")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"# articles/views.py\n\ndef detail(request, pk):\n    article = get_object_or_404(Article, pk=pk)\n    comment_form = CommentForm()\n    comments = article.comment_set.all()\n    context = {\n        'article': article,\n        'comment_form': comment_form,\n        'comments': comments,\n    }\n    return render(request, 'articles/detail.html', context)\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html"},"\x3c!-- articles/detail.html --\x3e\n\n{% extends 'base.html' %}\n\n{% block content %}\n  ...\n  <a href=\"{% url 'articles:index' %}\">[back]</a>\n  <hr>\n  <h4>\ub313\uae00 \ubaa9\ub85d</h4>\n  <ul>\n    {% for comment in comments %}\n      <li>\n        {{ comment.user }} - {{ comment.content }}\n      </li>\n    {% endfor %}\n  </ul>\n  ...\n{% endblock content %}\n")),(0,r.kt)("br",null),(0,r.kt)("h3",{id:"comment-delete"},"Comment DELETE"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"# articles/urls.py\n\napp_name = 'articles'\nurlpatterns = [\n    ...\n    path('<int:article_pk>/comments/<int:comment_pk>/delete/', views.comments_delete, name='comments_delete'),\n]\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"# articles/views.py\n\n@require_POST\ndef comments_delete(request, article_pk, comment_pk):\n    comment = get_object_or_404(Comment, pk=comment_pk)\n    comment.delete()\n    return redirect('articles:detail', article_pk)\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html"},'\x3c!-- articles/detail.html --\x3e\n\n{% extends \'base.html\' %}\n\n{% block content %}\n  ...\n  <h4>\ub313\uae00 \ubaa9\ub85d</h4>\n  <ul>\n    {% for comment in comments %}\n      <li>\n        {{ comment.user }} - {{ comment.content }}\n        {% if user == comment.user %}\n          <form action="{% url \'articles:comments_delete\' article.pk comment.pk %}" method="POST" class="d-inline">\n            {% csrf_token %}\n            <input type="submit" value="DELETE">\n          </form>\n        {% endif %}\n      </li>\n    {% endfor %}\n  </ul>\n\n  <hr>\n  ...\n{% endblock content %}\n')),(0,r.kt)("br",null),(0,r.kt)("h4",{id:"\uc778\uc99d\ub41c-\uc0ac\uc6a9\uc790\uc758-\uacbd\uc6b0\ub9cc-\ub313\uae00-\uc791\uc131-\ubc0f-\uc0ad\uc81c"},"\uc778\uc99d\ub41c \uc0ac\uc6a9\uc790\uc758 \uacbd\uc6b0\ub9cc \ub313\uae00 \uc791\uc131 \ubc0f \uc0ad\uc81c"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"# articles/views.py\n\n@require_POST\ndef comments_create(request, pk):\n    if request.user.is_authenticated:\n        article = get_object_or_404(Article, pk=pk)\n        comment_form = CommentForm(request.POST)\n        if comment_form.is_valid():\n            comment = comment_form.save(commit=False)\n            comment.article = article\n            comment.save()\n        return redirect('articles:detail', article.pk)\n    return redirect('accounts:login')\n\n\n@require_POST\ndef comments_delete(request, article_pk, comment_pk):\n    if request.user.is_authenticated:\n        comment = get_object_or_404(Comment, pk=comment_pk)\n        comment.delete()\n    return redirect('articles:detail', article_pk)\n")),(0,r.kt)("br",null),(0,r.kt)("h3",{id:"comment-\ucd94\uac00-\uc0ac\ud56d"},"Comment \ucd94\uac00 \uc0ac\ud56d"),(0,r.kt)("h4",{id:"\ub313\uae00-\uac1c\uc218-\ucd9c\ub825\ud558\uae30"},"\ub313\uae00 \uac1c\uc218 \ucd9c\ub825\ud558\uae30"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html"},"\x3c!-- articles/detail.html --\x3e\n\n<h4>\ub313\uae00 \ubaa9\ub85d</h4>\n{% if comments %}\n  <p><b>{{ comments|length }}\uac1c\uc758 \ub313\uae00\uc774 \uc788\uc2b5\ub2c8\ub2e4.</b></p>\n{% endif %}\n")),(0,r.kt)("br",null),(0,r.kt)("h4",{id:"\ub313\uae00\uc774-\uc5c6\ub294-\uacbd\uc6b0-\ub300\uccb4-\ucee8\ud150\uce20-\ucd9c\ub825"},"\ub313\uae00\uc774 \uc5c6\ub294 \uacbd\uc6b0 \ub300\uccb4 \ucee8\ud150\uce20 \ucd9c\ub825"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"DTL\uc758 for-emtpy \ud0dc\uadf8 \ud65c\uc6a9")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html"},'\x3c!-- articles/detail.html --\x3e\n\n<ul>\n  {% for comment in comments %}\n  <li>\n    {{ comment.user }} - {{ comment.content }}\n    {% if user == comment.user %}\n      <form action="{% url \'articles:comments_delete\' article.pk comment.pk %}" method="POST" class="d-inline">\n        {% csrf_token %}\n        <input type="submit" value="DELETE">\n      </form>\n    {% endif %}\n  </li>\n  {% empty %}\n    <p>\ub313\uae00\uc774 \uc5c6\uc5b4\uc694..</p>\n  {% endfor %}\n</ul>\n')),(0,r.kt)("br",null),(0,r.kt)("h3",{id:"customizing-authentication-in-django"},"Customizing authentication in Django"),(0,r.kt)("h4",{id:"user-\ubaa8\ub378-\ub300\uccb4\ud558\uae30"},"User \ubaa8\ub378 \ub300\uccb4\ud558\uae30"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\uc77c\ubd80 \ud504\ub85c\uc81d\ud2b8\uc5d0\uc11c\ub294 Django\uc758 ",(0,r.kt)("strong",{parentName:"li"},"\ub0b4\uc7a5 User \ubaa8\ub378\uc774 \uc81c\uacf5\ud558\ub294 \uc778\uc99d \uc694\uad6c\uc0ac\ud56d\uc774 \uc801\uc808\ud558\uc9c0 \uc54a\uc744 \uc218 \uc788\uc74c"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"ex. username \ub300\uc2e0 email\uc744 \uc2dd\ubcc4 \ud1a0\ud070\uc73c\ub85c \uc0ac\uc6a9\ud558\ub294 \uac83\uc774 \ub354 \uc801\ud569\ud55c \uc0ac\uc774\ud2b8"))),(0,r.kt)("li",{parentName:"ul"},"Django\ub294 User\ub97c \ucc38\uc870\ud558\ub294\ub370 \uc0ac\uc6a9\ud558\ub294 ",(0,r.kt)("inlineCode",{parentName:"li"},"AUTH_USER_MODEL")," \uac12\uc744 \uc81c\uacf5\ud558\uc5ec, default user model\uc744 ",(0,r.kt)("strong",{parentName:"li"},"\uc7ac\uc815\uc758(override)")," \ud560 \uc218 \uc788\ub3c4\ub85d \ud568."),(0,r.kt)("li",{parentName:"ul"},"Django\ub294 \uc0c8 \ud504\ub85c\uc81d\ud2b8\ub97c \uc2dc\uc791\ud558\ub294 \uacbd\uc6b0 \uae30\ubcf8 \uc0ac\uc6a9\uc790 \ubaa8\ub378\uc774 \ucda9\ubd84\ud558\ub354\ub77c\ub3c4, ",(0,r.kt)("strong",{parentName:"li"},"\ucee4\uc2a4\ud140 \uc720\uc800 \ubaa8\ub378\uc744 \uc124\uc815\ud558\ub294 \uac83\uc744 \uac15\ub825\ud558\uac8c \uad8c\uc7a5")," (highly recommended)",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\ub2e8, \ud504\ub85c\uc81d\ud2b8\uc758 \ubaa8\ub4e0 migrations \ud639\uc740 \uccab migrate\ub97c \uc2e4\ud589\ud558\uae30 \uc804\uc5d0 \uc774 \uc791\uc5c5\uc744 \ub9c8\uccd0\uc57c \ud568.")))),(0,r.kt)("br",null),(0,r.kt)("h4",{id:"auth_user_model"},"AUTH_USER_MODEL"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"User\ub97c \ub098\ud0c0\ub0b4\ub294 \ub370 \uc0ac\uc6a9\ud558\ub294 \ubaa8\ub378"),(0,r.kt)("li",{parentName:"ul"},"\ud504\ub85c\uc81d\ud2b8\uac00 \uc9c4\ud589\ub418\ub294 \ub3d9\uc548 \ubcc0\uacbd\ud560 \uc218 \uc5c6\uc74c"),(0,r.kt)("li",{parentName:"ul"},"\ud504\ub85c\uc81d\ud2b8 \uc2dc\uc791 \uc2dc \uc124\uc815\ud558\uae30 \uc704\ud55c \uac83\uc774\uba70, \ucc38\uc870\ud558\ub294 \ubaa8\ub378\uc740 \uccab\ubc88\uc9f8 \ub9c8\uc774\uadf8\ub808\uc774\uc158\uc5d0\uc11c \uc0ac\uc6a9\ud560 \uc218 \uc788\uc5b4\uc57c \ud568"),(0,r.kt)("li",{parentName:"ul"},"\uae30\ubcf8 \uac12 : ",(0,r.kt)("inlineCode",{parentName:"li"},"auth.User")," (",(0,r.kt)("inlineCode",{parentName:"li"},"auth")," \uc571\uc758 ",(0,r.kt)("inlineCode",{parentName:"li"},"User")," \ubaa8\ub378)")),(0,r.kt)("br",null),(0,r.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"[\ucc38\uace0]"," \ud504\ub85c\uc81d\ud2b8 \uc911\uac04(mid-project)\uc5d0 ",(0,r.kt)("inlineCode",{parentName:"h5"},"AUTH_USER_MODEL")," \ubcc0\uacbd\ud558\uae30")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("ul",{parentName:"div"},(0,r.kt)("li",{parentName:"ul"},"\ubaa8\ub378 \uad00\uacc4\uc5d0 \uc601\ud5a5\uc744 \ubbf8\uce58\uae30 \ub54c\ubb38\uc5d0 \ud6e8\uc52c \ub354 \uc5b4\ub824\uc6b4 \uc791\uc5c5\uc774 \ud544\uc694"),(0,r.kt)("li",{parentName:"ul"},"\uc989, \uc911\uac04 \ubcc0\uacbd\uc740 \uad8c\uc7a5\ud558\uc9c0 \uc54a\uc73c\ubbc0\ub85c \ucd08\uae30\uc5d0 \uc124\uc815\ud558\ub294 \uac83\uc744 \uad8c\uc7a5")))),(0,r.kt)("br",null),(0,r.kt)("h4",{id:"custom-user-\ubaa8\ub378-\uc815\uc758\ud558\uae30"},"Custom User \ubaa8\ub378 \uc815\uc758\ud558\uae30"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\uad00\ub9ac\uc790 \uad8c\ud55c\uacfc \ud568\uaed8 \uc644\uc804\ud55c \uae30\ub2a5\uc744 \uac16\ucd98 User \ubaa8\ub378\uc744 \uad6c\ud604\ud558\ub294 \uae30\ubcf8 \ud074\ub798\uc2a4\uc778 AbstractUser\ub97c \uc0c1\uc18d\ubc1b\uc544 \uc0c8\ub85c\uc6b4 User \ubaa8\ub378 \uc791\uc131")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"# accounts/models.py\n\nfrom django.contrib.auth.models import AbstractUser\n\n\nclass User(AbstractUser):\n    pass    \n")),(0,r.kt)("br",null),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\uae30\uc874\uc5d0 django\uac00 \uc0ac\uc6a9\ud558\ub294 User \ubaa8\ub378\uc774\uc5c8\ub358 auth\uc571\uc758 User \ubaa8\ub378\uc744 accounts \uc571\uc758 User \ubaa8\ub378\uc744 \uc0ac\uc6a9\ud558\ub3c4\ub85d \ubcc0\uacbd")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"# settings.py\n\nAUTH_USER_MODEL = 'accounts.User'\n")),(0,r.kt)("br",null),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"admin site\uc5d0 Custom User \ubaa8\ub378 \ub4f1\ub85d")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"# accounts/admin.py\n\nfrom django.contrib import admin\nfrom django.contrib.auth.admin import UserAdmin\nfrom .models import User\n\n\nadmin.site.register(User, UserAdmin)\n")),(0,r.kt)("br",null),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\ud504\ub85c\uc81d\ud2b8 \uc911\uac04\uc5d0 \uc9c4\ud589\ud588\uae30 \ub54c\ubb38\uc5d0 \ub370\uc774\ud130\ubca0\uc774\uc2a4\ub97c \ucd08\uae30\ud654 \ud55c \ud6c4 \ub9c8\uc774\uadf8\ub808\uc774\uc158 \uc9c4\ud589"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"\ucd08\uae30\ud654 \ubc29\ubc95"),(0,r.kt)("ol",{parentName:"li"},(0,r.kt)("li",{parentName:"ol"},"db.sqlite3 \uc0ad\uc81c"),(0,r.kt)("li",{parentName:"ol"},"migrations \ud30c\uc77c \ubaa8\ub450 \uc0ad\uc81c (\ud30c\uc77c\uba85\uc5d0 \uc22b\uc790\uac00 \ubd99\uc740 \ud30c\uc77c\ub9cc \uc0ad\uc81c)")))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"$ python manage.py makemigrations\n$ python manage.py migrate\n")),(0,r.kt)("br",null),(0,r.kt)("h3",{id:"custom-user--built-in-auth-forms"},"Custom user & Built-in auth forms"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\ud68c\uc6d0\uac00\uc785 \uc2dc\ub3c4 \ud6c4 ModelForm \uad00\ub828 \uc5d0\ub7ec \ubc1c\uc0dd"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"UserCreationForm"),"\uacfc ",(0,r.kt)("inlineCode",{parentName:"li"},"UserChangeForm"),"\uc740 \uae30\uc874 \ub0b4\uc7a5 User \ubaa8\ub378\uc744 \uc0ac\uc6a9\ud55c ModelForm\uc774\uae30 \ub54c\ubb38\uc5d0 \ucee4\uc2a4\ud140 User \ubaa8\ub378\ub85c \ub300\uccb4\ud574\uc57c \ud568."),(0,r.kt)("li",{parentName:"ul"},"\ucee4\uc2a4\ud140 User \ubaa8\ub378\uc774 AbstractUser\uc758 \ud558\uc704 \ud074\ub798\uc2a4\uc778 \uacbd\uc6b0 \ub2e4\uc74c\uacfc \uac19\uc740 \ubc29\uc2dd\uc73c\ub85c form\uc744 \ud655\uc7a5")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"# accounts/forms.py\n\nfrom django.contrib.auth.forms import UserChangeForm, UserCreationForm\nfrom django.contrib.auth import get_user_model\n\n\nclass CustomUserCreationForm(UserCreationForm):\n\n    class Meta(UserCreationForm.Meta):\n        model = get_user_model()\n        fields = UserCreationForm.Meta.fields + ('email',)\n        \n\nclass CustomUserChangeForm(UserChangeForm):\n\n    class Meta:\n        model = get_user_model()\n        fields = ('email', 'first_name', 'last_name',)\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"# accounts/views.py\n\nfrom .forms import CustomUserChangeForm, CustomUserCreationForm\n\n\ndef signup(request):\n    if request.user.is_authenticated:\n        return redirect('articles:index')\n\n    if request.method == 'POST':\n        form = CustomUserCreationForm(request.POST)\n        if form.is_valid():\n            user = form.save()\n            auth_login(request, user)\n            return redirect('articles:index')\n    else:\n        form = CustomUserCreationForm()\n    context = {\n        'form': form,\n    }\n    return render(request, 'accounts/signup.html', context)\n")),(0,r.kt)("br",null),(0,r.kt)("h4",{id:"get_user_model"},(0,r.kt)("inlineCode",{parentName:"h4"},"get_user_model()")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\ud604\uc7ac \ud504\ub85c\uc81d\ud2b8\uc5d0\uc11c \ud65c\uc131\ud654\ub41c \uc0ac\uc6a9\uc790 \ubaa8\ub378(active user model)\uc744 \ubc18\ud658",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"User \ubaa8\ub378\uc744 \ucee4\uc2a4\ud130\ub9c8\uc774\uc9d5\ud55c \uc0c1\ud669\uc5d0\uc11c\ub294 Custom User \ubaa8\ub378\uc744 \ubc18\ud658"))),(0,r.kt)("li",{parentName:"ul"},"\uc774 \ub54c\ubb38\uc5d0 django\ub294 User \ud074\ub798\uc2a4\ub97c \uc9c1\uc811 \ucc38\uc870\ud558\ub294 \ub300\uc2e0 ",(0,r.kt)("inlineCode",{parentName:"li"},"django.contrib.auth.get_user_model()"),"\uc744 \uc0ac\uc6a9\ud558\uc5ec \ucc38\uc870\ud574\uc57c \ud55c\ub2e4\uace0 \uac15\uc870")),(0,r.kt)("br",null),(0,r.kt)("h2",{id:"1n-relationship"},"1:N Relationship"),(0,r.kt)("h3",{id:"user---article-1n"},"User - Article (1:N)"),(0,r.kt)("h4",{id:"user-\ubaa8\ub378-\ucc38\uc870\ud558\uae30"},"User \ubaa8\ub378 \ucc38\uc870\ud558\uae30"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"settings.AUTH_USER_MODEL"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"User \ubaa8\ub378\uc5d0 \ub300\ud55c \uc678\ub798 \ud0a4 \ub610\ub294 \ub2e4\ub300\ub2e4 \uad00\uacc4\ub97c \uc815\uc758\ud560 \ub54c \uc0ac\uc6a9\ud574\uc57c \ud568."),(0,r.kt)("li",{parentName:"ul"},"models.py\uc5d0\uc11c User \ubaa8\ub378\uc744 \ucc38\uc870\ud560 \ub54c \uc0ac\uc6a9"))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("inlineCode",{parentName:"li"},"get_user_model()"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\ud604\uc7ac \ud65c\uc131\ud654(active)\ub41c User \ubaa8\ub378\uc744 \ubc18\ud658",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"\ucee4\uc2a4\ud130\ub9c8\uc774\uc9d5\ud55c User \ubaa8\ub378\uc774 \uc788\uc744 \uacbd\uc6b0\ub294 Custom User \ubaa8\ub378, \uadf8\ub807\uc9c0 \uc54a\uc73c\uba74 User\ub97c \ubc18\ud658"),(0,r.kt)("li",{parentName:"ul"},"User\ub97c \uc9c1\uc811 \ucc38\uc870\ud558\uc9c0 \uc54a\ub294 \uc774\uc720"))),(0,r.kt)("li",{parentName:"ul"},"models.py\uac00 \uc544\ub2cc \ub2e4\ub978 \ubaa8\ub4e0 \uacf3\uc5d0\uc11c \uc720\uc800 \ubaa8\ub378\uc744 \ucc38\uc870\ud560 \ub54c \uc0ac\uc6a9")))),(0,r.kt)("br",null),(0,r.kt)("h4",{id:"user\uc640-article-\uac04-\ubaa8\ub378-\uad00\uacc4-\uc815\uc758-\ud6c4-migration"},"User\uc640 Article \uac04 \ubaa8\ub378 \uad00\uacc4 \uc815\uc758 \ud6c4 migration"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"# articles/models.py\n\nfrom django.conf import settings\n\n\nclass Article(models.Model):\n    user = models.ForeignKey(settings.AUTH_USER_MODEL, on_delete=models.CASCADE)\n    ...\n")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"$ python manage.py makemigrations\n")),(0,r.kt)("br",null),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"null \uac12\uc774 \ud5c8\uc6a9\ub418\uc9c0 \uc54a\ub294 user_id \ud544\ub4dc\uac00 \ubcc4\ub3c4\uc758 \uac12 \uc5c6\uc774 article\uc5d0 \ucd94\uac00\ub418\ub824 \ud560 \ub54c"),(0,r.kt)("li",{parentName:"ul"},"1 \uc785\ub825 \ud6c4 enter : \ud604\uc7ac \ud654\uba74\uc5d0\uc11c \uae30\ubcf8 \uac12\uc744 \uc124\uc815\ud558\uaca0\ub2e4\ub294 \uc758\ubbf8"),(0,r.kt)("li",{parentName:"ul"},"1 \uc785\ub825 \ud6c4 enter : \uae30\uc874 \ud544\ub4dc\uc5d0 \ucd94\uac00\ub418\ub294 user_id \ud544\ub4dc\uc758 \uac12\uc744 1\ub85c \uc124\uc815\ud558\uaca0\ub2e4\ub294 \uc758\ubbf8")),(0,r.kt)("br",null),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"$ python manage.py migrate\n")),(0,r.kt)("br",null),(0,r.kt)("h4",{id:"\uac8c\uc2dc\uae00-\ucd9c\ub825-\ud544\ub4dc-\uc218\uc815"},"\uac8c\uc2dc\uae00 \ucd9c\ub825 \ud544\ub4dc \uc218\uc815"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"# articles/forms.py\n\nclass ArticleForm(forms.ModelForm):\n\n    class Meta:\n        model = Article\n        fields = ('title', 'content',)\n")),(0,r.kt)("br",null),(0,r.kt)("h4",{id:"create--not-null-constraint-failed-error-\uc218\uc815"},"CREATE : NOT NULL constraint failed ERROR \uc218\uc815"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\uac8c\uc2dc\uae00 \uc791\uc131 \uc2dc \uc791\uc131\uc790 \uc815\ubcf4 (article.user) \ub204\ub77d")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"# articles/views.py\n\n@login_required\n@require_http_methods(['GET', 'POST'])\ndef create(request):\n    if request.method == 'POST':\n        form = ArticleForm(request.POST)\n        if form.is_valid():\n            article = form.save(commit=False)\n            article.user = request.user\n            article.save()\n            return redirect('articles:detail', article.pk)\n    else:\n        form = ArticleForm()\n    context = {\n        'form': form,\n    }\n    return render(request, 'articles/create.html', context)\n")),(0,r.kt)("br",null),(0,r.kt)("h4",{id:"delete-\uc218\uc815"},"DELETE \uc218\uc815"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\uc790\uc2e0\uc774 \uc791\uc131\ud55c \uac8c\uc2dc\uae00\ub9cc \uc0ad\uc81c \uac00\ub2a5\ud558\ub3c4\ub85d \uc124\uc815")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"# articles/views.py\n\n@require_POST\ndef delete(request, pk):\n    article = get_object_or_404(Article, pk=pk)\n    if request.user.is_authenticated:\n        if request.user == article.user: \n            article.delete()\n            return redirect('articles:index')\n    return redirect('articles:detail', article.pk)\n")),(0,r.kt)("br",null),(0,r.kt)("h4",{id:"update-\uc218\uc815"},"UPDATE \uc218\uc815"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\uc790\uc2e0\uc774 \uc791\uc131\ud55c \uac8c\uc2dc\uae00\ub9cc \uc218\uc815 \uac00\ub2a5\ud558\ub3c4\ub85d \uc124\uc815")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"# articles/views.py\n\n@login_required\n@require_http_methods(['GET', 'POST'])\ndef update(request, pk):\n    article = get_object_or_404(Article, pk=pk)\n    if request.user == article.user:\n        if request.method == 'POST':\n            form = ArticleForm(request.POST, instance=article)\n            if form.is_valid():\n                form.save()\n                return redirect('articles:detail', article.pk)\n        else:\n            form = ArticleForm(instance=article)\n    else:\n        return redirect('articles:index')\n    context = {\n        'article': article,\n        'form': form,\n    }\n    return render(request, 'articles/update.html', context)\n")),(0,r.kt)("br",null),(0,r.kt)("h4",{id:"read-\uc218\uc815"},"READ \uc218\uc815"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\uac8c\uc2dc\uae00 \uc791\uc131 user \uc815\ubcf4 \ucd9c\ub825")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html"},"\x3c!-- articles/index.html --\x3e\n\n{% extends 'base.html' %}\n\n{% block content %}\n  ...\n  {% for article in articles %}\n    <p>\uc791\uc131\uc790 : {{ article.user }}</p>\n    <p>\uae00 \ubc88\ud638 : {{ article.pk }}</p>\n    <p>\uae00 \uc81c\ubaa9 : {{ article.title }}</p>\n    <p>\uae00 \ub0b4\uc6a9 : {{ article.content }}</p>\n    <a href=\"{% url 'articles:detail' article.pk %}\">[DETAIL]</a>\n    <hr>\n  {% endfor %}\n{% endblock content %}\n")),(0,r.kt)("br",null),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\ud574\ub2f9 \uac8c\uc2dc\uae00\uc758 \uc791\uc131\uc790\uac00 \uc544\ub2c8\ub77c\uba74, \uc218\uc815/\uc0ad\uc81c \ubc84\ud2bc\uc744 \ucd9c\ub825\ud558\uc9c0 \uc54a\ub3c4\ub85d \ucc98\ub9ac")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html"},'\x3c!-- articles/detail.html --\x3e\n\n{% extends \'base.html\' %}\n\n{% block content %}\n  ...\n  {% if user == article.user %}\n    <a href="{% url \'articles:update\' article.pk %}">[UPDATE]</a>\n    <form action="{% url \'articles:delete\' article.pk %}" method="POST">\n      {% csrf_token %}\n      <input type="submit" value="DELETE">\n    </form>\n  {% endif %}\n{% endblock content %}\n')),(0,r.kt)("br",null),(0,r.kt)("h3",{id:"user---comment-1n"},"User - Comment (1:N)"),(0,r.kt)("h4",{id:"user\uc640-comment-\uac04-\ubaa8\ub378-\uad00\uacc4-\uc815\uc758-\ud6c4-migration"},"User\uc640 Comment \uac04 \ubaa8\ub378 \uad00\uacc4 \uc815\uc758 \ud6c4 migration"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"# articles/models.py\n\nclass Comment(models.Model):\n    article = models.ForeignKey(Article, on_delete=models.CASCADE)\n    user = models.ForeignKey(settings.AUTH_USER_MODEL, on_delete=models.CASCADE)\n    ...\n")),(0,r.kt)("br",null),(0,r.kt)("h4",{id:"\ub313\uae00-\ucd9c\ub825-\ud544\ub4dc-\uc218\uc815"},"\ub313\uae00 \ucd9c\ub825 \ud544\ub4dc \uc218\uc815"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\uac8c\uc2dc\uae00 \uc791\uc131 \ud398\uc774\uc9c0\uc5d0\uc11c \ubd88\ud544\uc694\ud55c \ud544\ub4dc \uc81c\uc678")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"# articles/forms.py\n\nclass CommentForm(forms.ModelForm):\n\n    class Meta:\n        model = Comment\n        exclude = ('article', 'user',)\n")),(0,r.kt)("br",null),(0,r.kt)("h4",{id:"create-not-null-constraint-failed-error-\uc218\uc815"},"CREATE: NOT NULL constraint failed ERROR \uc218\uc815"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\ub313\uae00 \uc791\uc131 \uc2dc \uc791\uc131\uc790 \uc815\ubcf4 (comment.user) \ub204\ub77d")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"# articles/views.py\n\n@require_POST\ndef comments_create(request, pk):\n    if request.user.is_authenticated:\n        article = get_object_or_404(Article, pk=pk)\n        comment_form = CommentForm(request.POST)\n        if comment_form.is_valid():\n            comment = comment_form.save(commit=False)\n            comment.article = article\n            comment.user = request.user\n            comment.save()\n        return redirect('articles:detail', article.pk)\n    return redirect('accounts:login')\n")),(0,r.kt)("br",null),(0,r.kt)("h4",{id:"read-\uc218\uc815-1"},"READ \uc218\uc815"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\ube44\ub85c\uadf8\uc778 \uc720\uc800\uc5d0\uac8c\ub294 \ub313\uae00 form \ucd9c\ub825 \uc228\uae30\uae30")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html"},'\x3c!-- articles/detail.html --\x3e\n\n{% if request.user.is_authenticated %}\n  <form action="{% url \'articles:comments_create\' article.pk %}" method="POST">\n    {% csrf_token %}\n    {{ comment_form }}\n    <input type="submit">\n  </form>\n{% else %}\n  <a href="{% url \'accounts:login\' %}">[\ub313\uae00\uc744 \uc791\uc131\ud558\ub824\uba74 \ub85c\uadf8\uc778\ud558\uc138\uc694.]</a>\n{% endif %}\n')),(0,r.kt)("br",null),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\ub313\uae00 \uc791\uc131\uc790 \ucd9c\ub825")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html"},'\x3c!-- articles/detail.html --\x3e\n\n{% for comment in comments %}\n  <li>\n    {{ comment.user }} - {{ comment.content }}\n    <form action="{% url \'articles:comments_delete\' article.pk comment.pk %}" method="POST" class="d-inline">\n      {% csrf_token %}\n      <input type="submit" value="DELETE">\n    </form>\n  </li>\n{% empty %}\n  <p>\ub313\uae00\uc774 \uc5c6\uc5b4\uc694..</p>\n{% endfor %}\n')),(0,r.kt)("br",null),(0,r.kt)("h4",{id:"delete-\uc218\uc815-1"},"DELETE \uc218\uc815"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\uc790\uc2e0\uc774 \uc791\uc131\ud55c \ub313\uae00\ub9cc \uc0ad\uc81c \ubc84\ud2bc\uc744 \ubcfc \uc218 \uc788\ub3c4\ub85d \uc218\uc815")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html"},'\x3c!-- articles/detail.html --\x3e\n\n{% for comment in comments %}\n  <li>\n    {{ comment.user }} - {{ comment.content }}\n    {% if user == comment.user %}\n      <form action="{% url \'articles:comments_delete\' article.pk comment.pk %}" method="POST" class="d-inline">\n        {% csrf_token %}\n        <input type="submit" value="DELETE">\n      </form>\n    {% endif %}\n  </li>\n{% empty %}\n  <p>\ub313\uae00\uc774 \uc5c6\uc5b4\uc694..</p>\n{% endfor %}\n')),(0,r.kt)("br",null),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\uc790\uc2e0\uc774 \uc791\uc131\ud55c \ub313\uae00\ub9cc \uc0ad\uc81c\ud560 \uc218 \uc788\ub3c4\ub85d \uc218\uc815")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-python"},"# articles/views.py\n\n@require_POST\ndef comments_delete(request, article_pk, comment_pk):\n    if request.user.is_authenticated:\n        comment = get_object_or_404(Comment, pk=comment_pk)\n        if request.user == comment.user:\n            comment.delete()\n    return redirect('articles:detail', article_pk)\n")),(0,r.kt)("br",null),(0,r.kt)("h2",{id:"\ub9c8\ubb34\ub9ac"},"\ub9c8\ubb34\ub9ac"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Foreign Key",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Comment CREATE"),(0,r.kt)("li",{parentName:"ul"},"Comment READ"),(0,r.kt)("li",{parentName:"ul"},"Comment DELETE"))),(0,r.kt)("li",{parentName:"ul"},"Customizing authentication in Django",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},"Substituting a custom User model"),(0,r.kt)("li",{parentName:"ul"},"Custom user & Built-in auth forms")))),(0,r.kt)("br",null))}d.isMDXComponent=!0}}]);