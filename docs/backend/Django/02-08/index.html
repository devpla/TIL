<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.8">
<link rel="search" type="application/opensearchdescription+xml" title="Today I Learned" href="/TIL/opensearch.xml"><title data-react-helmet="true">Model Relationship - M:N | Today I Learned</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://devpla.github.io/TIL/docs/backend/Django/02-08"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Model Relationship - M:N | Today I Learned"><meta data-react-helmet="true" name="description" content="- Intro"><meta data-react-helmet="true" property="og:description" content="- Intro"><link data-react-helmet="true" rel="shortcut icon" href="/TIL/img/favicon.png"><link data-react-helmet="true" rel="canonical" href="https://devpla.github.io/TIL/docs/backend/Django/02-08"><link data-react-helmet="true" rel="alternate" href="https://devpla.github.io/TIL/docs/backend/Django/02-08" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://devpla.github.io/TIL/docs/backend/Django/02-08" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://P19FK0A5FI-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/TIL/assets/css/styles.d2a5650e.css">
<link rel="preload" href="/TIL/assets/js/runtime~main.72d8d802.js" as="script">
<link rel="preload" href="/TIL/assets/js/main.0c15651c.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/TIL/"><div class="navbar__logo"><img src="/TIL/img/logo.png" alt="My Site Logo" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/TIL/img/logo.png" alt="My Site Logo" class="themedImage_TMUO themedImage--dark_uzRr"></div><b class="navbar__title">Today I Learned</b></a><a class="navbar__item navbar__link" href="/TIL/docs/frontend/intro">Frontend</a><a class="navbar__item navbar__link" href="/TIL/docs/backend/intro">Backend</a><a class="navbar__item navbar__link" href="/TIL/docs/CS/intro">CS</a><div class="navbar__item dropdown dropdown--hoverable"><a class="navbar__link">Etc</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/TIL/docs/etc/infra/intro">infra</a></li></ul></div></div><div class="navbar__items navbar__items--right"><a href="https://github.com/devpla/TIL" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="toggle toggle_2i4l toggle--disabled" role="button" tabindex="-1"><div class="toggle__icon toggle__icon--unchecked" style="font-family:Material Icons">dark_mode</div><div class="toggle__icon toggle__icon--checked" style="font-family:Material Icons">light_mode</div><input type="checkbox" class="toggle__screenreader-only" aria-label="Switch between dark and light mode"></div><div class="searchBox_NKBi"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_i9tI" type="button"></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/TIL/docs/backend/intro">Intro</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#">Django</a><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/TIL/docs/backend/Django/02-00">Intro</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/TIL/docs/backend/Django/02-01">MTV Pattern</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/TIL/docs/backend/Django/02-02">CRUD with views</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/TIL/docs/backend/Django/02-03">Form &amp; ModelForm</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/TIL/docs/backend/Django/02-04">Authentication System</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/TIL/docs/backend/Django/02-05">Static &amp; Media Files</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/TIL/docs/backend/Django/02-06">SQL &amp; ORM</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/TIL/docs/backend/Django/02-07">Model Relationship - 1:N</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/TIL/docs/backend/Django/02-08">Model Relationship - M:N</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/TIL/docs/backend/Django/02-09">REST API</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Model Relationship - M:N</h1></header><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>목차</h5></div><div class="admonition-content"><ul><li>Intro<ul><li>병원 진료 기록 시스템</li></ul></li><li>ManyToManyField<ul><li>좋아요 기능 (Like)</li><li>Profile Page</li><li>팔로우 기능 (Follow)</li></ul></li></ul></div></div><br><h2 class="anchor anchorWithStickyNavbar_y2LR" id="intro-병원-진료-기록-시스템">Intro: 병원 진료 기록 시스템<a aria-hidden="true" class="hash-link" href="#intro-병원-진료-기록-시스템" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_y2LR" id="병원-진료-기록-시스템을-통한-mn-관계-학습">병원 진료 기록 시스템을 통한 M:N 관계 학습<a aria-hidden="true" class="hash-link" href="#병원-진료-기록-시스템을-통한-mn-관계-학습" title="Direct link to heading">​</a></h3><ul><li>환자와 의사가 사용하는 병원 진료 기록 시스템 구축<ul><li>병원 시스템에서 가장 핵심이 되는 객체는 무엇일까? → 환자와 의사</li><li>이 둘의 관계를 어떻게 표현할 수 있을까?</li></ul></li></ul><br><ul><li>시작하기 전<ul><li>모델링은 현실 세계를 최대한 유사하게 반영하기 위한 것</li><li>우리 일상에 가까운 예시를 통해 DB를 모델링하고, 그 내부에서 일어나는 데이터의 흐름을 어떻게 제어할 수 있을지 고민해보기</li></ul></li></ul><br><ul><li>아래 링크에서 Django 프로젝트 다운로드<ul><li><a href="http://abit.ly/ssafy-mtm-practice" target="_blank" rel="noopener noreferrer">http://abit.ly/ssafy-mtm-practice</a></li></ul></li></ul><br><ul><li>1:N 모델 관계가 설정되어 있음</li></ul><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><pre tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token keyword" style="color:rgb(12, 150, 155)">from</span><span class="token plain"> django</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">db </span><span class="token keyword" style="color:rgb(12, 150, 155)">import</span><span class="token plain"> models</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic"># Create your models here.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(17, 17, 17)">Doctor</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">models</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">Model</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    name </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> models</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">TextField</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">__str__</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">self</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token keyword" style="color:rgb(12, 150, 155)">return</span><span class="token plain"> </span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)">f&#x27;</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token string-interpolation interpolation">self</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token string-interpolation interpolation">pk</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)">번 의사 </span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token string-interpolation interpolation">self</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token string-interpolation interpolation">name</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)">&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(17, 17, 17)">Patient</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">models</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">Model</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    name </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> models</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">TextField</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    doctor </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> models</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">ForeignKey</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">Doctor</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> on_delete</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain">models</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">CASCADE</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">__str__</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">self</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token keyword" style="color:rgb(12, 150, 155)">return</span><span class="token plain"> </span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)">f&#x27;</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token string-interpolation interpolation">self</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token string-interpolation interpolation">pk</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)">번 환자 </span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token string-interpolation interpolation">self</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token string-interpolation interpolation">name</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)">&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><br><ul><li>migration 후 shell_plus 실행</li><li>의사 2명과 환자 2명 생성</li></ul><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token plain">$ python manage.py makemigrations</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">$ python manage.py migrate</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">$ python manage.py shell_plus</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><pre tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token plain">In </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token number" style="color:rgb(170, 9, 130)">1</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> doctor1 </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> Doctor</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">objects</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">create</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">name</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;justin&#x27;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">In </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token number" style="color:rgb(170, 9, 130)">2</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> doctor2 </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> Doctor</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">objects</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">create</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">name</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;eric&#x27;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">In </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token number" style="color:rgb(170, 9, 130)">3</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> patient1 </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> Patient</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">objects</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">create</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">name</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;tony&#x27;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> doctor</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain">doctor1</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">In </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token number" style="color:rgb(170, 9, 130)">4</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> patient2 </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> Patient</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">objects</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">create</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">name</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;harry&#x27;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> doctor</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain">doctor2</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">In </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token number" style="color:rgb(170, 9, 130)">5</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> doctor1</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">Out</span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token number" style="color:rgb(170, 9, 130)">5</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">&lt;</span><span class="token plain">Doctor</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(170, 9, 130)">1</span><span class="token plain">번 의사 justin</span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">In </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token number" style="color:rgb(170, 9, 130)">6</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> doctor2</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">Out</span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token number" style="color:rgb(170, 9, 130)">6</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">&lt;</span><span class="token plain">Doctor</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(170, 9, 130)">2</span><span class="token plain">번 의사 eric</span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">In </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token number" style="color:rgb(170, 9, 130)">7</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> patient1</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">Out</span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token number" style="color:rgb(170, 9, 130)">7</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">&lt;</span><span class="token plain">Patient</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(170, 9, 130)">1</span><span class="token plain">번 환자 tony</span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">In </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token number" style="color:rgb(170, 9, 130)">8</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> patient2</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">Out</span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token number" style="color:rgb(170, 9, 130)">8</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">&lt;</span><span class="token plain">Patient</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(170, 9, 130)">2</span><span class="token plain">번 환자 harry</span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><br><h3 class="anchor anchorWithStickyNavbar_y2LR" id="1n의-한계">1:N의 한계<a aria-hidden="true" class="hash-link" href="#1n의-한계" title="Direct link to heading">​</a></h3><ul><li>1번 환자 (tony)가 1번 의사의 진ㅇ료를 마치고, 2번 의사에게도 방문하려고 한다면, 새로운 예약을 생성해야 한다.</li><li>기존의 예약을 유지한 상태로 새로운 예약을 생성</li><li>새로 생상한 3번 환자(tony)는 1번 환자(tony)와 다름</li></ul><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><pre tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token plain">In </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token number" style="color:rgb(170, 9, 130)">10</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> patient3 </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> Patient</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">objects</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">create</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">name</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;tony&#x27;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> doctor</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain">doctor2</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">In </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token number" style="color:rgb(170, 9, 130)">11</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> patient3</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">Out</span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token number" style="color:rgb(170, 9, 130)">11</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">&lt;</span><span class="token plain">Patient</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(170, 9, 130)">3</span><span class="token plain">번 환자 tony</span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">In </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token number" style="color:rgb(170, 9, 130)">12</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> patient3</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">doctor</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">name</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">Out</span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token number" style="color:rgb(170, 9, 130)">12</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;eric&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><br><ul><li>한 번에 두 의사에게 진료를 받고자 함</li><li>하나의 외래키에 2개의 의사 데이터를 넣을 수 없음.</li></ul><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><pre tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token plain">In </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token number" style="color:rgb(170, 9, 130)">14</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> patient4 </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> Patient</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">objects</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">create</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">name</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;harry&#x27;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> doctor</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain">doctor1</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> doctor2</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  File </span><span class="token string" style="color:rgb(72, 118, 214)">&quot;&lt;ipython-input-14-6edaf3ffb4e6&gt;&quot;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> line </span><span class="token number" style="color:rgb(170, 9, 130)">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    patient4 </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> Patient</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">objects</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">create</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">name</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;harry&#x27;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> doctor</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain">doctor1</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> doctor2</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">                                                                           </span><span class="token operator" style="color:rgb(12, 150, 155)">^</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">SyntaxError</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> positional argument follows keyword argument</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><br><ul><li>새로운 예약을 생성하는 것이 불가능<ul><li>새로운 객체를 생성해야 함</li></ul></li><li>여러 의사에게 진료 받은 기록을 환자 한명에 저장할 수 없음<ul><li>외래 키에 &#x27;1, 2&#x27; 형식의 데이터를 사용할 수 없음.</li></ul></li></ul><br><h3 class="anchor anchorWithStickyNavbar_y2LR" id="중개-모델">중개 모델<a aria-hidden="true" class="hash-link" href="#중개-모델" title="Direct link to heading">​</a></h3><ul><li>중개 모델 (혹은 중개 테이블, Associate Table) 작성</li></ul><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><pre tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic"># hospitals/models.py</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">from</span><span class="token plain"> django</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">db </span><span class="token keyword" style="color:rgb(12, 150, 155)">import</span><span class="token plain"> models</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(17, 17, 17)">Doctor</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">models</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">Model</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    name </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> models</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">TextField</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">__str__</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">self</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token keyword" style="color:rgb(12, 150, 155)">return</span><span class="token plain"> </span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)">f&#x27;</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token string-interpolation interpolation">self</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token string-interpolation interpolation">pk</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)">번 의사 </span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token string-interpolation interpolation">self</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token string-interpolation interpolation">name</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)">&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(17, 17, 17)">Patient</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">models</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">Model</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    name </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> models</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">TextField</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic"># 외래키 삭제</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">__str__</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">self</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token keyword" style="color:rgb(12, 150, 155)">return</span><span class="token plain"> </span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)">f&#x27;</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token string-interpolation interpolation">self</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token string-interpolation interpolation">pk</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)">번 환자 </span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token string-interpolation interpolation">self</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token string-interpolation interpolation">name</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)">&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic"># 중개모델 작성</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(17, 17, 17)">Reservation</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">models</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">Model</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    doctor </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> models</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">ForeignKey</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">Doctor</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> on_delete</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain">models</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">CASCADE</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    patient </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> models</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">ForeignKey</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">Patient</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> on_delete</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain">models</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">CASCADE</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">__str__</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">self</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token keyword" style="color:rgb(12, 150, 155)">return</span><span class="token plain"> </span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)">f&#x27;</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token string-interpolation interpolation">self</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token string-interpolation interpolation">doctor_id</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)">번 의사의 </span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token string-interpolation interpolation">self</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token string-interpolation interpolation">patient_id</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)">번 환자&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><br><ul><li>데이터베이스 초기화 / 마이그레이션 및 shell_plus 실행</li></ul><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token plain">$ python manage.py makemigrations</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">$ python manage.py migrate</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">$ python manage.py shell_plus</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><br><ul><li>중개 모델과의 모델 관계 확인</li></ul><p><img alt="image-20211020092244882" src="/TIL/assets/images/mn1-4802ebf58373394fc82a3b95d380683c.png"></p><br><ul><li>의사 1명과 환자 1명 생성 및 예약 생성</li></ul><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><pre tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token plain">In </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token number" style="color:rgb(170, 9, 130)">1</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> doctor1 </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> Doctor</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">objects</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">create</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">name</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;justin&#x27;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">In </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token number" style="color:rgb(170, 9, 130)">2</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> patient1 </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> Patient</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">objects</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">create</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">name</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;tony&#x27;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">In </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token number" style="color:rgb(170, 9, 130)">3</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> Reservation</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">objects</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">create</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">doctor</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain">doctor1</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> patient</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain">patient1</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">Out</span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token number" style="color:rgb(170, 9, 130)">3</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">&lt;</span><span class="token plain">Reservation</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(170, 9, 130)">1</span><span class="token plain">번 의사의 </span><span class="token number" style="color:rgb(170, 9, 130)">1</span><span class="token plain">번 환자</span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><br><ul><li>예약 내역 조회</li><li>의사의 예약 환자 조회</li></ul><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><pre tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token plain">In </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token number" style="color:rgb(170, 9, 130)">4</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> doctor1</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">reservation_set</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token builtin" style="color:rgb(72, 118, 214)">all</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">Out</span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token number" style="color:rgb(170, 9, 130)">4</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">&lt;</span><span class="token plain">QuerySet </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token operator" style="color:rgb(12, 150, 155)">&lt;</span><span class="token plain">Reservation</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(170, 9, 130)">1</span><span class="token plain">번 의사의 </span><span class="token number" style="color:rgb(170, 9, 130)">1</span><span class="token plain">번 환자</span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><br><ul><li>환자의 담당 의사 조회</li></ul><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><pre tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token plain">In </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token number" style="color:rgb(170, 9, 130)">5</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> patient1</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">reservation_set</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token builtin" style="color:rgb(72, 118, 214)">all</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">Out</span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token number" style="color:rgb(170, 9, 130)">5</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">&lt;</span><span class="token plain">QuerySet </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token operator" style="color:rgb(12, 150, 155)">&lt;</span><span class="token plain">Reservation</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(170, 9, 130)">1</span><span class="token plain">번 의사의 </span><span class="token number" style="color:rgb(170, 9, 130)">1</span><span class="token plain">번 환자</span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><br><ul><li>환자 1명 추가 생성 및 1번 의사에게 예약 생성</li></ul><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><pre tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token plain">In </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token number" style="color:rgb(170, 9, 130)">6</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> patient2 </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> Patient</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">objects</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">create</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">name</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;harry&#x27;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">In </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token number" style="color:rgb(170, 9, 130)">7</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> Reservation</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">objects</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">create</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">doctor</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain">doctor1</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> patient</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain">patient2</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">Out</span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token number" style="color:rgb(170, 9, 130)">7</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">&lt;</span><span class="token plain">Reservation</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(170, 9, 130)">1</span><span class="token plain">번 의사의 </span><span class="token number" style="color:rgb(170, 9, 130)">2</span><span class="token plain">번 환자</span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><br><ul><li>의사의 예약 환자 조회</li></ul><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><pre tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token plain">In </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token number" style="color:rgb(170, 9, 130)">9</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> doctor1</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">reservation_set</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token builtin" style="color:rgb(72, 118, 214)">all</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">Out</span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token number" style="color:rgb(170, 9, 130)">9</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">&lt;</span><span class="token plain">QuerySet </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token operator" style="color:rgb(12, 150, 155)">&lt;</span><span class="token plain">Reservation</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(170, 9, 130)">1</span><span class="token plain">번 의사의 </span><span class="token number" style="color:rgb(170, 9, 130)">1</span><span class="token plain">번 환자</span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">&lt;</span><span class="token plain">Reservation</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(170, 9, 130)">1</span><span class="token plain">번 의사의 </span><span class="token number" style="color:rgb(170, 9, 130)">2</span><span class="token plain">번 환자</span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">In </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token number" style="color:rgb(170, 9, 130)">10</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">for</span><span class="token plain"> reservation </span><span class="token keyword" style="color:rgb(12, 150, 155)">in</span><span class="token plain"> doctor1</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">reservation_set</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token builtin" style="color:rgb(72, 118, 214)">all</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain">     </span><span class="token keyword" style="color:rgb(12, 150, 155)">print</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">reservation</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">patient</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">name</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">tony</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">harry</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><br><h3 class="anchor anchorWithStickyNavbar_y2LR" id="manytomanyfield">ManyToManyField<a aria-hidden="true" class="hash-link" href="#manytomanyfield" title="Direct link to heading">​</a></h3><ul><li>다대다(M:N, many-to-many) 관계 설정 시 사용하는 모델 필드</li><li>하나의 필수 위치인자(M:N 관계로 설정할 모델 클래스)가 필요</li></ul><br><ul><li>ManyToManyField 작성 (중개 모델 삭제)<ul><li>필드 작성 위치는 Doctor 또는 Patient 모두 작성 가능</li></ul></li></ul><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><pre tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token keyword" style="color:rgb(12, 150, 155)">from</span><span class="token plain"> django</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">db </span><span class="token keyword" style="color:rgb(12, 150, 155)">import</span><span class="token plain"> models</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(17, 17, 17)">Doctor</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">models</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">Model</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    name </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> models</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">TextField</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">__str__</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">self</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token keyword" style="color:rgb(12, 150, 155)">return</span><span class="token plain"> </span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)">f&#x27;</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token string-interpolation interpolation">self</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token string-interpolation interpolation">pk</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)">번 의사 </span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token string-interpolation interpolation">self</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token string-interpolation interpolation">name</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)">&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(17, 17, 17)">Patient</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">models</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">Model</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    name </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> models</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">TextField</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic"># ManyToManyField 작성</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    doctors </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> models</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">ManyToManyField</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">Doctor</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">__str__</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">self</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token keyword" style="color:rgb(12, 150, 155)">return</span><span class="token plain"> </span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)">f&#x27;</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token string-interpolation interpolation">self</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token string-interpolation interpolation">pk</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)">번 환자 </span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token string-interpolation interpolation">self</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token string-interpolation interpolation">name</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)">&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic"># 중개모델 작성</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(17, 17, 17)">Reservation</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">models</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">Model</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    doctor </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> models</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">ForeignKey</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">Doctor</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> on_delete</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain">models</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">CASCADE</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    patient </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> models</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">ForeignKey</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">Patient</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> on_delete</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain">models</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">CASCADE</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">__str__</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">self</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token keyword" style="color:rgb(12, 150, 155)">return</span><span class="token plain"> </span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)">f&#x27;</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token string-interpolation interpolation">self</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token string-interpolation interpolation">doctor_id</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)">번 의사의 </span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token string-interpolation interpolation">self</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token string-interpolation interpolation">patient_id</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)">번 환자&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><br><ul><li>데이터베이스 초기화 / 마이그레이션 및 shell_plus 실행</li></ul><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token plain">$ python manage.py makemigrations</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">$ python manage.py migrate</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">$ python manage.py shell_plus</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><br><ul><li><code>ManyToManyField</code>로 인해 생성된 중개 테이블 확인</li></ul><p><img alt="image-20211020093814441" src="/TIL/assets/images/mn8-5adc87e88fb482d822556104ecf984eb.png"></p><br><ul><li>의사 1명과 환자 2명 생성</li></ul><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><pre tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token plain">In </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token number" style="color:rgb(170, 9, 130)">1</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> doctor1 </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> Doctor</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">objects</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">create</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">name</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;justin&#x27;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">In </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token number" style="color:rgb(170, 9, 130)">2</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> patient1 </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> Patient</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">objects</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">create</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">name</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;tony&#x27;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">In </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token number" style="color:rgb(170, 9, 130)">3</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> patient2 </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> Patient</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">objects</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">create</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">name</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;harry&#x27;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><br><ul><li><strong>예약 생성 (참조)</strong><ol><li>patient1(tony)이 doctor1(justin)에게 예약</li><li>patient1이 예약한 의사 목록 확인</li><li>doctor1에게 예약된 환자 목록 확인</li></ol></li></ul><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><pre tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token plain">In </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token number" style="color:rgb(170, 9, 130)">4</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> patient1</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">doctors</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">add</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">doctor1</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">In </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token number" style="color:rgb(170, 9, 130)">5</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> patient1</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">doctors</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token builtin" style="color:rgb(72, 118, 214)">all</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain">     </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic"># 참조 : patient에 ManyToManyField를 작성했기 때문</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">Out</span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token number" style="color:rgb(170, 9, 130)">5</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">&lt;</span><span class="token plain">QuerySet </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token operator" style="color:rgb(12, 150, 155)">&lt;</span><span class="token plain">Doctor</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(170, 9, 130)">1</span><span class="token plain">번 의사 justin</span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">In </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token number" style="color:rgb(170, 9, 130)">6</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> doctor1</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">patient_set</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token builtin" style="color:rgb(72, 118, 214)">all</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain">  </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic"># 역참조</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">Out</span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token number" style="color:rgb(170, 9, 130)">6</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">&lt;</span><span class="token plain">QuerySet </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token operator" style="color:rgb(12, 150, 155)">&lt;</span><span class="token plain">Patient</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(170, 9, 130)">1</span><span class="token plain">번 환자 tony</span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><br><ul><li><strong>예약 생성 (역참조)</strong><ol><li>doctor1(justin)이 patient2(harry)를 예약</li><li>doctor1에게 예약된 환자 목록 확인</li><li>patient2, patient1이 각각 예약한 의사 목록 확인</li></ol></li></ul><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><pre tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token plain">In </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token number" style="color:rgb(170, 9, 130)">10</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> doctor1</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">patient_set</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">add</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">patient2</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">In </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token number" style="color:rgb(170, 9, 130)">11</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> doctor1</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">patient_set</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token builtin" style="color:rgb(72, 118, 214)">all</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">Out</span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token number" style="color:rgb(170, 9, 130)">11</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">&lt;</span><span class="token plain">QuerySet </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token operator" style="color:rgb(12, 150, 155)">&lt;</span><span class="token plain">Patient</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(170, 9, 130)">1</span><span class="token plain">번 환자 tony</span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">&lt;</span><span class="token plain">Patient</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(170, 9, 130)">2</span><span class="token plain">번 환자 harry</span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">In </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token number" style="color:rgb(170, 9, 130)">12</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> patient2</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">doctors</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token builtin" style="color:rgb(72, 118, 214)">all</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">Out</span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token number" style="color:rgb(170, 9, 130)">12</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">&lt;</span><span class="token plain">QuerySet </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token operator" style="color:rgb(12, 150, 155)">&lt;</span><span class="token plain">Doctor</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(170, 9, 130)">1</span><span class="token plain">번 의사 justin</span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">In </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token number" style="color:rgb(170, 9, 130)">13</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> patient1</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">doctors</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token builtin" style="color:rgb(72, 118, 214)">all</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">Out</span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token number" style="color:rgb(170, 9, 130)">13</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">&lt;</span><span class="token plain">QuerySet </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token operator" style="color:rgb(12, 150, 155)">&lt;</span><span class="token plain">Doctor</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(170, 9, 130)">1</span><span class="token plain">번 의사 justin</span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><br><ul><li>중개 테이블 데이터 확인</li></ul><p><img alt="image-20211020094538914" src="data:image/png;base64,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"></p><br><ul><li><strong>예약 취소 (역참조)</strong><ol><li>doctor1(justin)이 patient1(tony) 진료 예약 취소</li><li>doctor1에게 예약된 환자 목록 확인</li><li>patient1이 예약한 의사 목록 확인</li></ol></li></ul><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><pre tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token plain">In </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token number" style="color:rgb(170, 9, 130)">15</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> doctor1</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">patient_set</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">remove</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">patient1</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">In </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token number" style="color:rgb(170, 9, 130)">16</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> doctor1</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">patient_set</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token builtin" style="color:rgb(72, 118, 214)">all</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">Out</span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token number" style="color:rgb(170, 9, 130)">16</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">&lt;</span><span class="token plain">QuerySet </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token operator" style="color:rgb(12, 150, 155)">&lt;</span><span class="token plain">Patient</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(170, 9, 130)">2</span><span class="token plain">번 환자 harry</span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">In </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token number" style="color:rgb(170, 9, 130)">17</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> patient1</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">doctors</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token builtin" style="color:rgb(72, 118, 214)">all</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">Out</span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token number" style="color:rgb(170, 9, 130)">17</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">&lt;</span><span class="token plain">QuerySet </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><br><ul><li><strong>예약 취소 (참조)</strong><ol><li>patient2(harry)가 doctor1(justin) 진료 예약 취소</li><li>patient2가 예약한 의사 목록 확인</li><li>doctor1에게 예약된 환자 목록 확인</li></ol></li></ul><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><pre tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token plain">In </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token number" style="color:rgb(170, 9, 130)">18</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> patient2</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">doctors</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">remove</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">doctor1</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">In </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token number" style="color:rgb(170, 9, 130)">19</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> patient2</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">doctors</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token builtin" style="color:rgb(72, 118, 214)">all</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">Out</span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token number" style="color:rgb(170, 9, 130)">19</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">&lt;</span><span class="token plain">QuerySet </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">In </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token number" style="color:rgb(170, 9, 130)">20</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> doctor1</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">patient_set</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token builtin" style="color:rgb(72, 118, 214)">all</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">Out</span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token number" style="color:rgb(170, 9, 130)">20</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">&lt;</span><span class="token plain">QuerySet </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><br><ul><li>중개 테이블 데이터 확인</li></ul><p><img alt="image-20211020094834882" src="data:image/png;base64,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"></p><br><h3 class="anchor anchorWithStickyNavbar_y2LR" id="related_name">related_name<a aria-hidden="true" class="hash-link" href="#related_name" title="Direct link to heading">​</a></h3><ul><li>target model(관계 필드를 가지지 않은 모델)이 source model(관계 필드를 가진 모델)을 참조할 때 사용할 manager의 이름을 설정</li><li>즉, 역참조 시에 사용하는 manager의 이름을 설정</li><li>ForeignKey의 related_name과 동일</li></ul><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><pre tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token keyword" style="color:rgb(12, 150, 155)">from</span><span class="token plain"> django</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">db </span><span class="token keyword" style="color:rgb(12, 150, 155)">import</span><span class="token plain"> models</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(17, 17, 17)">Doctor</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">models</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">Model</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    name </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> models</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">TextField</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">__str__</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">self</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token keyword" style="color:rgb(12, 150, 155)">return</span><span class="token plain"> </span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)">f&#x27;</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token string-interpolation interpolation">self</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token string-interpolation interpolation">pk</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)">번 의사 </span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token string-interpolation interpolation">self</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token string-interpolation interpolation">name</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)">&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(17, 17, 17)">Patient</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">models</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">Model</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    name </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> models</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">TextField</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic"># ManyToManyField - related_name 작성</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    doctors </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> models</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">ManyToManyField</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">Doctor</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> related_name</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;patients&#x27;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">__str__</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">self</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token keyword" style="color:rgb(12, 150, 155)">return</span><span class="token plain"> </span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)">f&#x27;</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token string-interpolation interpolation">self</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token string-interpolation interpolation">pk</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)">번 환자 </span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token string-interpolation interpolation">self</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token string-interpolation interpolation">name</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)">&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(17, 17, 17)">Reservation</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">models</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">Model</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    doctor </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> models</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">ForeignKey</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">Doctor</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> on_delete</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain">models</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">CASCADE</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    patient </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> models</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">ForeignKey</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">Patient</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> on_delete</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain">models</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">CASCADE</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">__str__</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">self</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token keyword" style="color:rgb(12, 150, 155)">return</span><span class="token plain"> </span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)">f&#x27;</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token string-interpolation interpolation">self</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token string-interpolation interpolation">doctor_id</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)">번 의사의 </span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token string-interpolation interpolation">self</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token string-interpolation interpolation">patient_id</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)">번 환자&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><br><ul><li>마이그레이션 및 shell_plus 실행</li></ul><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token plain">$ python manage.py makemigrations</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">$ python manage.py migrate</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">$ python manage.py shell_plus</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><br><ul><li>doctor1의 예약 환자 목록 확인 해보기 (역참조)</li><li>related_name 설정 후 기존의 _set manager는 더 이상 사용할 수 없음.</li></ul><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><pre tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token plain">In </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token number" style="color:rgb(170, 9, 130)">1</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> doctor1 </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> Doctor</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">objects</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">get</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">pk</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token number" style="color:rgb(170, 9, 130)">1</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">In </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token number" style="color:rgb(170, 9, 130)">2</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> doctor1</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">patients</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token builtin" style="color:rgb(72, 118, 214)">all</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">Out</span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token number" style="color:rgb(170, 9, 130)">2</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">&lt;</span><span class="token plain">QuerySet </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">In </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token number" style="color:rgb(170, 9, 130)">3</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> doctor1</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">patient_set</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token builtin" style="color:rgb(72, 118, 214)">all</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token operator" style="color:rgb(12, 150, 155)">-</span><span class="token operator" style="color:rgb(12, 150, 155)">-</span><span class="token operator" style="color:rgb(12, 150, 155)">-</span><span class="token operator" style="color:rgb(12, 150, 155)">-</span><span class="token operator" style="color:rgb(12, 150, 155)">-</span><span class="token operator" style="color:rgb(12, 150, 155)">-</span><span class="token operator" style="color:rgb(12, 150, 155)">-</span><span class="token operator" style="color:rgb(12, 150, 155)">-</span><span class="token operator" style="color:rgb(12, 150, 155)">-</span><span class="token operator" style="color:rgb(12, 150, 155)">-</span><span class="token operator" style="color:rgb(12, 150, 155)">-</span><span class="token operator" style="color:rgb(12, 150, 155)">-</span><span class="token operator" style="color:rgb(12, 150, 155)">-</span><span class="token operator" style="color:rgb(12, 150, 155)">-</span><span class="token operator" style="color:rgb(12, 150, 155)">-</span><span class="token operator" style="color:rgb(12, 150, 155)">-</span><span class="token operator" style="color:rgb(12, 150, 155)">-</span><span class="token operator" style="color:rgb(12, 150, 155)">-</span><span class="token operator" style="color:rgb(12, 150, 155)">-</span><span class="token operator" style="color:rgb(12, 150, 155)">-</span><span class="token operator" style="color:rgb(12, 150, 155)">-</span><span class="token operator" style="color:rgb(12, 150, 155)">-</span><span class="token operator" style="color:rgb(12, 150, 155)">-</span><span class="token operator" style="color:rgb(12, 150, 155)">-</span><span class="token operator" style="color:rgb(12, 150, 155)">-</span><span class="token operator" style="color:rgb(12, 150, 155)">-</span><span class="token operator" style="color:rgb(12, 150, 155)">-</span><span class="token operator" style="color:rgb(12, 150, 155)">-</span><span class="token operator" style="color:rgb(12, 150, 155)">-</span><span class="token operator" style="color:rgb(12, 150, 155)">-</span><span class="token operator" style="color:rgb(12, 150, 155)">-</span><span class="token operator" style="color:rgb(12, 150, 155)">-</span><span class="token operator" style="color:rgb(12, 150, 155)">-</span><span class="token operator" style="color:rgb(12, 150, 155)">-</span><span class="token operator" style="color:rgb(12, 150, 155)">-</span><span class="token operator" style="color:rgb(12, 150, 155)">-</span><span class="token operator" style="color:rgb(12, 150, 155)">-</span><span class="token operator" style="color:rgb(12, 150, 155)">-</span><span class="token operator" style="color:rgb(12, 150, 155)">-</span><span class="token operator" style="color:rgb(12, 150, 155)">-</span><span class="token operator" style="color:rgb(12, 150, 155)">-</span><span class="token operator" style="color:rgb(12, 150, 155)">-</span><span class="token operator" style="color:rgb(12, 150, 155)">-</span><span class="token operator" style="color:rgb(12, 150, 155)">-</span><span class="token operator" style="color:rgb(12, 150, 155)">-</span><span class="token operator" style="color:rgb(12, 150, 155)">-</span><span class="token operator" style="color:rgb(12, 150, 155)">-</span><span class="token operator" style="color:rgb(12, 150, 155)">-</span><span class="token operator" style="color:rgb(12, 150, 155)">-</span><span class="token operator" style="color:rgb(12, 150, 155)">-</span><span class="token operator" style="color:rgb(12, 150, 155)">-</span><span class="token operator" style="color:rgb(12, 150, 155)">-</span><span class="token operator" style="color:rgb(12, 150, 155)">-</span><span class="token operator" style="color:rgb(12, 150, 155)">-</span><span class="token operator" style="color:rgb(12, 150, 155)">-</span><span class="token operator" style="color:rgb(12, 150, 155)">-</span><span class="token operator" style="color:rgb(12, 150, 155)">-</span><span class="token operator" style="color:rgb(12, 150, 155)">-</span><span class="token operator" style="color:rgb(12, 150, 155)">-</span><span class="token operator" style="color:rgb(12, 150, 155)">-</span><span class="token operator" style="color:rgb(12, 150, 155)">-</span><span class="token operator" style="color:rgb(12, 150, 155)">-</span><span class="token operator" style="color:rgb(12, 150, 155)">-</span><span class="token operator" style="color:rgb(12, 150, 155)">-</span><span class="token operator" style="color:rgb(12, 150, 155)">-</span><span class="token operator" style="color:rgb(12, 150, 155)">-</span><span class="token operator" style="color:rgb(12, 150, 155)">-</span><span class="token operator" style="color:rgb(12, 150, 155)">-</span><span class="token operator" style="color:rgb(12, 150, 155)">-</span><span class="token operator" style="color:rgb(12, 150, 155)">-</span><span class="token operator" style="color:rgb(12, 150, 155)">-</span><span class="token operator" style="color:rgb(12, 150, 155)">-</span><span class="token operator" style="color:rgb(12, 150, 155)">-</span><span class="token operator" style="color:rgb(12, 150, 155)">-</span><span class="token operator" style="color:rgb(12, 150, 155)">-</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">AttributeError                            Traceback </span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">most recent call last</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token operator" style="color:rgb(12, 150, 155)">&lt;</span><span class="token plain">ipython</span><span class="token operator" style="color:rgb(12, 150, 155)">-</span><span class="token builtin" style="color:rgb(72, 118, 214)">input</span><span class="token operator" style="color:rgb(12, 150, 155)">-</span><span class="token number" style="color:rgb(170, 9, 130)">3</span><span class="token operator" style="color:rgb(12, 150, 155)">-</span><span class="token plain">e81b89c43a95</span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token plain"> </span><span class="token keyword" style="color:rgb(12, 150, 155)">in</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">&lt;</span><span class="token plain">module</span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token operator" style="color:rgb(12, 150, 155)">-</span><span class="token operator" style="color:rgb(12, 150, 155)">-</span><span class="token operator" style="color:rgb(12, 150, 155)">-</span><span class="token operator" style="color:rgb(12, 150, 155)">-</span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token plain"> </span><span class="token number" style="color:rgb(170, 9, 130)">1</span><span class="token plain"> doctor1</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">patient_set</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token builtin" style="color:rgb(72, 118, 214)">all</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">AttributeError</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;Doctor&#x27;</span><span class="token plain"> </span><span class="token builtin" style="color:rgb(72, 118, 214)">object</span><span class="token plain"> has no attribute </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;patient_set&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><br><h3 class="anchor anchorWithStickyNavbar_y2LR" id="중개-모델테이블-in-django">중개 모델(테이블) in Django<a aria-hidden="true" class="hash-link" href="#중개-모델테이블-in-django" title="Direct link to heading">​</a></h3><ul><li>django는 ManyToManyField를 통해 중개 테이블을 자동으로 생성</li><li>그렇다면 중개 테이블을 직접 작성하는 경우는 없을까?<ul><li>중개 테이블을 수동으로 지정하려는 경우 <code>through</code> 옵션을 사용하여, 중개 테이블을 나타내는 Django 모델을 지정할 수 있음 (다음 챕터에서 확인)</li><li>가장 일반적인 용도는 중개 테이블에 추가 데이터를 사용해 다대다 관계로 연결하려는 경우에 사용</li></ul></li></ul><br><h3 class="anchor anchorWithStickyNavbar_y2LR" id="요약">요약<a aria-hidden="true" class="hash-link" href="#요약" title="Direct link to heading">​</a></h3><ul><li>실제 Doctor와 Patient 테이블이 변하는 것은 없음.</li><li>1:N 관계는 완전한 종속의 관계이지만, <strong>M:N 관계는 의사에게 진찰받는 환자, 환자를 진찰하는 의사의 두가지 형태로 모두 표현이 가능</strong></li></ul><br><h2 class="anchor anchorWithStickyNavbar_y2LR" id="manytomanyfield-1">ManyToManyField<a aria-hidden="true" class="hash-link" href="#manytomanyfield-1" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_y2LR" id="개념-및-특징">개념 및 특징<a aria-hidden="true" class="hash-link" href="#개념-및-특징" title="Direct link to heading">​</a></h3><ul><li>다대다 (M:N, many-to-many) 관계 설정 시 사용하는 모델 필드</li><li>하나의 필수 위치인자 (M:N 관계로 설정할 모델 클래스)가 필요</li><li>모델 필드의 RelatedManager를 사용하여 관련 개체를 추가, 제거 또는 만들 수 있음.<ul><li><code>add()</code>, <code>remove()</code>, <code>create()</code>, <code>clear()</code> ...</li></ul></li></ul><br><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>[참고]<!-- --> RelatedManager</h5></div><div class="admonition-content"><ul><li>일대다 또는 다대다 관련 컨텍스트에서 사용되는 manager</li></ul></div></div><br><h3 class="anchor anchorWithStickyNavbar_y2LR" id="arguments">Arguments<a aria-hidden="true" class="hash-link" href="#arguments" title="Direct link to heading">​</a></h3><h4 class="anchor anchorWithStickyNavbar_y2LR" id="1-related_name">1. related_name<a aria-hidden="true" class="hash-link" href="#1-related_name" title="Direct link to heading">​</a></h4><ul><li>target model (관계 필드를 가지지 않은 모델)이 source model(관계 필드를 가진 모델)을 참조할 때(역참조 시) 사용할 manager의 이름을 설정</li><li>ForeignKey의 related_name과 동일</li></ul><br><h4 class="anchor anchorWithStickyNavbar_y2LR" id="2-through">2. through<a aria-hidden="true" class="hash-link" href="#2-through" title="Direct link to heading">​</a></h4><ul><li>중개 테이블을 직접 작성하는 경우, through 옵션을 사용하여 중개 테이블을 나타내는 Django 모델을 지정할 수 있음</li><li>일반적으로 중개 테이블에 추가 데이터를 사용하는 다대다 관계와 연결하려는 경우 (extra data with a many-to-many relationship)에 주로 사용됨.</li></ul><br><h4 class="anchor anchorWithStickyNavbar_y2LR" id="3-symmetrical">3. symmetrical<a aria-hidden="true" class="hash-link" href="#3-symmetrical" title="Direct link to heading">​</a></h4><ul><li>ManyToManyField가 동일한 모델(on self)을 가리키는 정의에서만 사용</li><li>symmetrical=True(기본값)일 경우 django는 person_set 매니저를 추가하지 않음</li><li>source 모델의 인스턴스가 target 모델의 인스턴스를 참조하면, target 모델 인스턴스도 source 모델 인스턴스를 자동으로 참조하도록 함<ul><li>즉, 내가 당신의 침구라면 당신도 내 친구가 되는 것</li><li>대칭을 원하지 않을 경우 False로 설정</li><li>Follow 기능 구현에서 다시 확인할 것</li></ul></li></ul><br><h3 class="anchor anchorWithStickyNavbar_y2LR" id="related-manager">Related Manager<a aria-hidden="true" class="hash-link" href="#related-manager" title="Direct link to heading">​</a></h3><ul><li>1:N 또는 M:N 관련 컨텍스트에서 사용되는 매니저</li><li>같은 이름의 메서드여도 각 관계(1:N, M:N)에 따라 다르게 사용 및 동작<ul><li>1:N에서는 target 모델 인스턴스만 사용 가능</li><li>M:N 관계에서는 관련된 두 객체에서 모두 사용 가능</li></ul></li><li>메서드 종류<ul><li><code>add()</code>, <code>remove()</code>, <code>create()</code>, <code>clear()</code>, <code>set()</code> 등</li></ul></li></ul><br><h4 class="anchor anchorWithStickyNavbar_y2LR" id="add"><code>add()</code><a aria-hidden="true" class="hash-link" href="#add" title="Direct link to heading">​</a></h4><ul><li><p>&quot;지정된 객체를 관련 객체 집합에 추가&quot;</p></li><li><p>이미 존재하는 관계에 사용하면 관계가 복제되지 않음</p></li><li><p>모델 인스턴스, 필드 값(PK)을 인자로 허용</p></li></ul><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><pre tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token plain">doctor1 </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> Doctor</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">objects</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">create</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">name</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;justin&#x27;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">patient1 </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> Patient</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">objects</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">create</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">name</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;tony&#x27;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">doctor1</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">patient_set</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">add</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">patient1</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic"># 또는</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">patient1</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">doctors</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">add</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">doctor1</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><br><h4 class="anchor anchorWithStickyNavbar_y2LR" id="remove"><code>remove()</code><a aria-hidden="true" class="hash-link" href="#remove" title="Direct link to heading">​</a></h4><ul><li>&quot;관련 객체 집합에서 지정된 모델 객체를 제거&quot;</li><li>내부적으로 QuerySet.delete()를 사용하여 관계가 삭제됨</li><li>모델 인스턴스, 필드 값(PK)을 인자로 허용</li></ul><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><pre tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token plain">doctor1 </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> Doctor</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">objects</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">get</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">pk</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token number" style="color:rgb(170, 9, 130)">1</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">patient1 </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> Patient</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">objects</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">get</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">pk</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token number" style="color:rgb(170, 9, 130)">1</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">doctor1</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">patient_set</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">remove</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">patient1</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic"># 또는</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">patient1</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">doctors</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">remove</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">doctor1</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><br><h3 class="anchor anchorWithStickyNavbar_y2LR" id="through--예시">through  예시<a aria-hidden="true" class="hash-link" href="#through--예시" title="Direct link to heading">​</a></h3><ul><li>모델 관계 설정</li></ul><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><pre tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token keyword" style="color:rgb(12, 150, 155)">from</span><span class="token plain"> django</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">db </span><span class="token keyword" style="color:rgb(12, 150, 155)">import</span><span class="token plain"> models</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(17, 17, 17)">Doctor</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">models</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">Model</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    name </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> models</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">TextField</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">__str__</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">self</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token keyword" style="color:rgb(12, 150, 155)">return</span><span class="token plain"> </span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)">f&#x27;</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token string-interpolation interpolation">self</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token string-interpolation interpolation">pk</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)">번 의사 </span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token string-interpolation interpolation">self</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token string-interpolation interpolation">name</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)">&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(17, 17, 17)">Patient</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">models</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">Model</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic"># through 옵션 작성</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    doctors </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> models</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">ManyToManyField</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">Doctor</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> through</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;Reservation&#x27;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    name </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> models</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">TextField</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">__str__</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">self</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token keyword" style="color:rgb(12, 150, 155)">return</span><span class="token plain"> </span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)">f&#x27;</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token string-interpolation interpolation">self</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token string-interpolation interpolation">pk</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)">번 환자 </span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token string-interpolation interpolation">self</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token string-interpolation interpolation">name</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)">&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(17, 17, 17)">Reservation</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">models</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">Model</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    doctor </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> models</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">ForeignKey</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">Doctor</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> on_delete</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain">models</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">CASCADE</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    patient </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> models</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">ForeignKey</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">Patient</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> on_delete</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain">models</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">CASCADE</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic"># 필드 추가</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    symptom </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> models</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">TextField</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    reserved_at </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> models</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">DateTimeField</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">auto_now_add</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token boolean" style="color:rgb(188, 84, 84)">True</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">__str__</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">self</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token keyword" style="color:rgb(12, 150, 155)">return</span><span class="token plain"> </span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)">f&#x27;</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token string-interpolation interpolation">self</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token string-interpolation interpolation">doctor</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token string-interpolation interpolation">pk</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)">번 의사의 </span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token string-interpolation interpolation">self</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token string-interpolation interpolation">patient</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token string-interpolation interpolation">pk</span><span class="token string-interpolation interpolation punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token string-interpolation string" style="color:rgb(72, 118, 214)">번 환자&#x27;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><br><ul><li>데이터베이스 초기화 / 마이그레이션 및 shell_plus 실행</li></ul><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token plain">$ python manage.py makemigrations</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">$ python manage.py migrate</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">$ python manage.py shell_plus</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><br><ul><li>중개 테이블 확인</li></ul><p><img alt="image-20211020103058365" src="/TIL/assets/images/mn5-e04e3905e448116ce1335537c3629160.png"></p><br><ul><li>의사 1명과 환자 2명 생성</li></ul><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><pre tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token plain">In </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token number" style="color:rgb(170, 9, 130)">1</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> doctor1 </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> Doctor</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">objects</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">create</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">name</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;justin&#x27;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">In </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token number" style="color:rgb(170, 9, 130)">2</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> patient1 </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> Patient</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">objects</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">create</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">name</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;tony&#x27;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">In </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token number" style="color:rgb(170, 9, 130)">3</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> patient2 </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> Patient</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">objects</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">create</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">name</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;harry&#x27;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><br><ul><li>예약 생성 - 1</li></ul><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><pre tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token plain">In </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token number" style="color:rgb(170, 9, 130)">4</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> reservation1 </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> Reservation</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">doctor</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain">doctor1</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> patient</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain">patient1</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> symptom</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;headache&#x27;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">In </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token number" style="color:rgb(170, 9, 130)">5</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> reservation1</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">save</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">In </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token number" style="color:rgb(170, 9, 130)">6</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> doctor1</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">patient_set</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token builtin" style="color:rgb(72, 118, 214)">all</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">Out</span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token number" style="color:rgb(170, 9, 130)">6</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">&lt;</span><span class="token plain">QuerySet </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token operator" style="color:rgb(12, 150, 155)">&lt;</span><span class="token plain">Patient</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(170, 9, 130)">1</span><span class="token plain">번 환자 tony</span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">In </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token number" style="color:rgb(170, 9, 130)">7</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> patient1</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">doctors</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token builtin" style="color:rgb(72, 118, 214)">all</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">Out</span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token number" style="color:rgb(170, 9, 130)">7</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">&lt;</span><span class="token plain">QuerySet </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token operator" style="color:rgb(12, 150, 155)">&lt;</span><span class="token plain">Doctor</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(170, 9, 130)">1</span><span class="token plain">번 의사 justin</span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><br><ul><li>중개 테이블 확인</li></ul><p><img alt="image-20211020103343290" src="/TIL/assets/images/mn6-a8ba87a3c4c547d0dedfed382ed339e7.png"></p><br><ul><li>예약 생성 - 2</li></ul><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><pre tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token plain">In </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token number" style="color:rgb(170, 9, 130)">8</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> patient2</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">doctors</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">add</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">doctor1</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> through_defaults</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;symptom&#x27;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;flu&#x27;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">In </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token number" style="color:rgb(170, 9, 130)">9</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> doctor1</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">patient_set</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token builtin" style="color:rgb(72, 118, 214)">all</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">Out</span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token number" style="color:rgb(170, 9, 130)">9</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">&lt;</span><span class="token plain">QuerySet </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token operator" style="color:rgb(12, 150, 155)">&lt;</span><span class="token plain">Patient</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(170, 9, 130)">1</span><span class="token plain">번 환자 tony</span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">&lt;</span><span class="token plain">Patient</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(170, 9, 130)">2</span><span class="token plain">번 환자 harry</span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">In </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token number" style="color:rgb(170, 9, 130)">10</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> patient2</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">doctors</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token builtin" style="color:rgb(72, 118, 214)">all</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">Out</span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token number" style="color:rgb(170, 9, 130)">10</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token operator" style="color:rgb(12, 150, 155)">&lt;</span><span class="token plain">QuerySet </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token operator" style="color:rgb(12, 150, 155)">&lt;</span><span class="token plain">Doctor</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(170, 9, 130)">1</span><span class="token plain">번 의사 justin</span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token operator" style="color:rgb(12, 150, 155)">&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><br><ul><li>중개 테이블 확인</li></ul><p><img alt="image-20211020103433723" src="/TIL/assets/images/mn7-c90d924e8f49613692c6635535f9617f.png"></p><br><ul><li>예약 삭제</li></ul><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><pre tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token plain">In </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token number" style="color:rgb(170, 9, 130)">11</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> doctor1</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">patient_set</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">remove</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">patient1</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">In </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token number" style="color:rgb(170, 9, 130)">12</span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> patient2</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">doctors</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">remove</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">doctor1</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><br><h3 class="anchor anchorWithStickyNavbar_y2LR" id="데이터베이스에서의-표현">데이터베이스에서의 표현<a aria-hidden="true" class="hash-link" href="#데이터베이스에서의-표현" title="Direct link to heading">​</a></h3><ul><li>django는 다대다 관계를 나타내는 중개 테이블을 만듦</li><li>테이블 이름은 다대다 필드의 이름과 이를 포함하는 모델의 테이블 이름을 조합하여 생성됨.</li></ul><br><h3 class="anchor anchorWithStickyNavbar_y2LR" id="중개-테이블의-필드-생성-규칙">중개 테이블의 필드 생성 규칙<a aria-hidden="true" class="hash-link" href="#중개-테이블의-필드-생성-규칙" title="Direct link to heading">​</a></h3><ol><li>source model 및 target model 모델이 다른 경우<ul><li><code>id</code></li><li><code>&lt;containing_model&gt;_id</code></li><li><code>&lt;other_model&gt;_id</code></li></ul></li><li>ManyToManyField가 동일한 모델을 가리키는 경우<ul><li><code>id</code></li><li><code>from_&lt;model&gt;_id</code></li><li><code>to_&lt;model&gt;_id</code></li></ul></li></ol><br><h2 class="anchor anchorWithStickyNavbar_y2LR" id="like">Like<a aria-hidden="true" class="hash-link" href="#like" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_y2LR" id="like-구현">Like 구현<a aria-hidden="true" class="hash-link" href="#like-구현" title="Direct link to heading">​</a></h3><ul><li>django_model_relationshop_II 프로젝트로 진행</li></ul><br><ul><li>ManyToManyField 작성 후 마이그레이션</li></ul><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><pre tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token keyword" style="color:rgb(12, 150, 155)">from</span><span class="token plain"> django</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">db </span><span class="token keyword" style="color:rgb(12, 150, 155)">import</span><span class="token plain"> models</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">from</span><span class="token plain"> django</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">conf </span><span class="token keyword" style="color:rgb(12, 150, 155)">import</span><span class="token plain"> settings</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(17, 17, 17)">Article</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">models</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">Model</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    user </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> models</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">ForeignKey</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">settings</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">AUTH_USER_MODEL</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> on_delete</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain">models</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">CASCADE</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic"># ManyToManyField 작성</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    like_users </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> models</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">ManyToManyField</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">settings</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">AUTH_USER_MODEL</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token plain">$ python manage.py makemigrations</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">SystemCheckError: System check identified some issues:</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">ERRORS:</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">articles.Article.like_users: </span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">fields.E304</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"> Reverse accessor </span><span class="token keyword" style="color:rgb(12, 150, 155)">for</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;articles.Article.like_users&#x27;</span><span class="token plain"> clashes with reverse accessor </span><span class="token keyword" style="color:rgb(12, 150, 155)">for</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;articles.Article.user&#x27;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">        HINT: Add or change a related_name argument to the definition </span><span class="token keyword" style="color:rgb(12, 150, 155)">for</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;articles.Article.like_users&#x27;</span><span class="token plain"> or </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;articles.Article.user&#x27;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">articles.Article.user: </span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">fields.E304</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"> Reverse accessor </span><span class="token keyword" style="color:rgb(12, 150, 155)">for</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;articles.Article.user&#x27;</span><span class="token plain"> clashes with reverse accessor </span><span class="token keyword" style="color:rgb(12, 150, 155)">for</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;articles.Article.like_users&#x27;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">        HINT: Add or change a related_name argument to the definition </span><span class="token keyword" style="color:rgb(12, 150, 155)">for</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;articles.Article.user&#x27;</span><span class="token plain"> or </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;articles.Article.like_users&#x27;</span><span class="token builtin class-name" style="color:rgb(17, 17, 17)">.</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><br><ul><li>에러 발생 원인<ul><li>like_users 필드 생성 시 자동으로 역참조는 .article_set 매니저를 생성</li><li>그러나 이전 1:N(User:Article) 관계에서 이미 해당 매니저 이름을 사용중이기 때문</li><li>User와 관계된 ForeignKey 또는 ManyToManyField 중 하나에 related_name 추가 필요</li></ul></li></ul><br><ul><li>related_name 설정 후 마이그레이션 다시 진행</li></ul><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><pre tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token keyword" style="color:rgb(12, 150, 155)">from</span><span class="token plain"> django</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">db </span><span class="token keyword" style="color:rgb(12, 150, 155)">import</span><span class="token plain"> models</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">from</span><span class="token plain"> django</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">conf </span><span class="token keyword" style="color:rgb(12, 150, 155)">import</span><span class="token plain"> settings</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(17, 17, 17)">Article</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">models</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">Model</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    user </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> models</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">ForeignKey</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">settings</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">AUTH_USER_MODEL</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> on_delete</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain">models</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">CASCADE</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic"># ManyToMany, related_name 추가</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    like_users </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> models</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">ManyToManyField</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">settings</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">AUTH_USER_MODEL</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> related_name</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;like_articles&#x27;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    title </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> models</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">CharField</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">max_length</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token number" style="color:rgb(170, 9, 130)">10</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    content </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> models</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">TextField</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    created_at </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> models</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">DateTimeField</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">auto_now_add</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token boolean" style="color:rgb(188, 84, 84)">True</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    updated_at </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> models</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">DateTimeField</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">auto_now</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token boolean" style="color:rgb(188, 84, 84)">True</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">__str__</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">self</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token keyword" style="color:rgb(12, 150, 155)">return</span><span class="token plain"> self</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">title</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(17, 17, 17)">Comment</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">models</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">Model</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    article </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> models</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">ForeignKey</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">Article</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> on_delete</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain">models</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">CASCADE</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    user </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> models</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">ForeignKey</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">settings</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">AUTH_USER_MODEL</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> on_delete</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain">models</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">CASCADE</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    content </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> models</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">CharField</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">max_length</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token number" style="color:rgb(170, 9, 130)">200</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    created_at </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> models</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">DateTimeField</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">auto_now_add</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token boolean" style="color:rgb(188, 84, 84)">True</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    updated_at </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> models</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">DateTimeField</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">auto_now</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token boolean" style="color:rgb(188, 84, 84)">True</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">__str__</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">self</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token keyword" style="color:rgb(12, 150, 155)">return</span><span class="token plain"> self</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">content</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token plain">$ python manage.py makemigrations</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">$ python manage.py migrate</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><br><ul><li>생성된 중개 테이블 확인</li></ul><p><img alt="image-20211020105240719" src="/TIL/assets/images/mn2-56412753b76890f9ea94fc18aa1c0b22.png"></p><br><h4 class="anchor anchorWithStickyNavbar_y2LR" id="현재-user-article-간-사용-가능한-db-api">현재 User-Article 간 사용 가능한 DB API<a aria-hidden="true" class="hash-link" href="#현재-user-article-간-사용-가능한-db-api" title="Direct link to heading">​</a></h4><ul><li><code>article.user</code><ul><li>게시글을 작성한 유저 - 1:N</li></ul></li><li><code>article.like_users</code><ul><li>게시글을 좋아요한 유저 - M:N</li></ul></li><li><code>user.article_set</code><ul><li>유저가 작성한 게시글 (역참조) - 1:N</li></ul></li><li><code>user.like_articles</code><ul><li>유저가 좋아요한 게시글 (역참조) - M:N</li></ul></li></ul><br><ul><li>url 작성</li></ul><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><pre tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic"># articles/urls.py</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">urlpatterns </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    path</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;&lt;int:article_pk&gt;/likes/&#x27;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> views</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">likes</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> name</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;likes&#x27;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><br><ul><li>like view 함수 작성</li></ul><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><pre tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic"># articles/views.py</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token decorator annotation punctuation" style="color:rgb(153, 76, 195)">@require_POST</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">likes</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">request</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> article_pk</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">if</span><span class="token plain"> request</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">user</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">is_authenticated</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">        article </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> get_object_or_404</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">Article</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> pk</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain">article_pk</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic"># 현재 좋아요를 요청하는 회원(request.user)이</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic"># 해당 게시글의 좋아요를 누른 회원 목록에 이미 있다면,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token keyword" style="color:rgb(12, 150, 155)">if</span><span class="token plain"> article</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">like_users</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token builtin" style="color:rgb(72, 118, 214)">filter</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">pk</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain">request</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">user</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">pk</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">exists</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic"># if request.user in article.like_users.all(): </span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">            </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic"># 좋아요 취소</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">            article</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">like_users</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">remove</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">request</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">user</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token keyword" style="color:rgb(12, 150, 155)">else</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">            </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic"># 좋아요 하기</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">            article</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">like_users</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">add</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">request</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">user</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token keyword" style="color:rgb(12, 150, 155)">return</span><span class="token plain"> redirect</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;articles:index&#x27;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">return</span><span class="token plain"> redirect</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;accounts:login&#x27;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><br><h4 class="anchor anchorWithStickyNavbar_y2LR" id="queryset-api---exists">QuerySet API - <code>exists()</code><a aria-hidden="true" class="hash-link" href="#queryset-api---exists" title="Direct link to heading">​</a></h4><ul><li>QuerySet에 결과가 포함되어 있으면 True를 반환하고, 그렇지 않으면 False를 반환</li><li>특히 규모가 큰 QuerySet의 컨텍스트에서 특정 개체 존재 여부와 관련된 검색에 유용</li><li>고유한 필드 (예: primary key)가 있는 모델이 QuerySet의 구성원인지 여부를 찾는 가장 효율적인 방법</li></ul><br><ul><li>index 페이지에 like 출력 부분 작성</li></ul><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI html"><pre tabindex="0" class="prism-code language-html codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">&lt;!-- articles/index.html --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">{% extends &#x27;base.html&#x27; %}</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">{% block content %}</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  ...</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(153, 76, 195)">&lt;</span><span class="token tag" style="color:rgb(153, 76, 195)">div</span><span class="token tag punctuation" style="color:rgb(153, 76, 195)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">      </span><span class="token tag punctuation" style="color:rgb(153, 76, 195)">&lt;</span><span class="token tag" style="color:rgb(153, 76, 195)">form</span><span class="token tag" style="color:rgb(153, 76, 195)"> </span><span class="token tag attr-name" style="color:rgb(72, 118, 214);font-style:italic">action</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(153, 76, 195)">=</span><span class="token tag attr-value punctuation" style="color:rgb(153, 76, 195)">&quot;</span><span class="token tag attr-value" style="color:rgb(153, 76, 195)">{% url </span><span class="token tag attr-value punctuation" style="color:rgb(153, 76, 195)">&#x27;</span><span class="token tag attr-value" style="color:rgb(153, 76, 195)">articles:likes</span><span class="token tag attr-value punctuation" style="color:rgb(153, 76, 195)">&#x27;</span><span class="token tag attr-value" style="color:rgb(153, 76, 195)"> article.pk %}</span><span class="token tag attr-value punctuation" style="color:rgb(153, 76, 195)">&quot;</span><span class="token tag" style="color:rgb(153, 76, 195)"> </span><span class="token tag attr-name" style="color:rgb(72, 118, 214);font-style:italic">method</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(153, 76, 195)">=</span><span class="token tag attr-value punctuation" style="color:rgb(153, 76, 195)">&quot;</span><span class="token tag attr-value" style="color:rgb(153, 76, 195)">POST</span><span class="token tag attr-value punctuation" style="color:rgb(153, 76, 195)">&quot;</span><span class="token tag punctuation" style="color:rgb(153, 76, 195)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">        {% csrf_token %}</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">        {% if user in article.like_users.all %}</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">          </span><span class="token tag punctuation" style="color:rgb(153, 76, 195)">&lt;</span><span class="token tag" style="color:rgb(153, 76, 195)">input</span><span class="token tag" style="color:rgb(153, 76, 195)"> </span><span class="token tag attr-name" style="color:rgb(72, 118, 214);font-style:italic">type</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(153, 76, 195)">=</span><span class="token tag attr-value punctuation" style="color:rgb(153, 76, 195)">&quot;</span><span class="token tag attr-value" style="color:rgb(153, 76, 195)">submit</span><span class="token tag attr-value punctuation" style="color:rgb(153, 76, 195)">&quot;</span><span class="token tag" style="color:rgb(153, 76, 195)"> </span><span class="token tag attr-name" style="color:rgb(72, 118, 214);font-style:italic">value</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(153, 76, 195)">=</span><span class="token tag attr-value punctuation" style="color:rgb(153, 76, 195)">&quot;</span><span class="token tag attr-value" style="color:rgb(153, 76, 195)">좋아요 취소</span><span class="token tag attr-value punctuation" style="color:rgb(153, 76, 195)">&quot;</span><span class="token tag punctuation" style="color:rgb(153, 76, 195)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">        {% else %}</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">          </span><span class="token tag punctuation" style="color:rgb(153, 76, 195)">&lt;</span><span class="token tag" style="color:rgb(153, 76, 195)">input</span><span class="token tag" style="color:rgb(153, 76, 195)"> </span><span class="token tag attr-name" style="color:rgb(72, 118, 214);font-style:italic">type</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(153, 76, 195)">=</span><span class="token tag attr-value punctuation" style="color:rgb(153, 76, 195)">&quot;</span><span class="token tag attr-value" style="color:rgb(153, 76, 195)">submit</span><span class="token tag attr-value punctuation" style="color:rgb(153, 76, 195)">&quot;</span><span class="token tag" style="color:rgb(153, 76, 195)"> </span><span class="token tag attr-name" style="color:rgb(72, 118, 214);font-style:italic">value</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(153, 76, 195)">=</span><span class="token tag attr-value punctuation" style="color:rgb(153, 76, 195)">&quot;</span><span class="token tag attr-value" style="color:rgb(153, 76, 195)">좋아요</span><span class="token tag attr-value punctuation" style="color:rgb(153, 76, 195)">&quot;</span><span class="token tag punctuation" style="color:rgb(153, 76, 195)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">        {% endif %}</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">      </span><span class="token tag punctuation" style="color:rgb(153, 76, 195)">&lt;/</span><span class="token tag" style="color:rgb(153, 76, 195)">form</span><span class="token tag punctuation" style="color:rgb(153, 76, 195)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(153, 76, 195)">&lt;/</span><span class="token tag" style="color:rgb(153, 76, 195)">div</span><span class="token tag punctuation" style="color:rgb(153, 76, 195)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(153, 76, 195)">&lt;</span><span class="token tag" style="color:rgb(153, 76, 195)">a</span><span class="token tag" style="color:rgb(153, 76, 195)"> </span><span class="token tag attr-name" style="color:rgb(72, 118, 214);font-style:italic">href</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(153, 76, 195)">=</span><span class="token tag attr-value punctuation" style="color:rgb(153, 76, 195)">&quot;</span><span class="token tag attr-value" style="color:rgb(153, 76, 195)">{% url </span><span class="token tag attr-value punctuation" style="color:rgb(153, 76, 195)">&#x27;</span><span class="token tag attr-value" style="color:rgb(153, 76, 195)">articles:detail</span><span class="token tag attr-value punctuation" style="color:rgb(153, 76, 195)">&#x27;</span><span class="token tag attr-value" style="color:rgb(153, 76, 195)"> article.pk %}</span><span class="token tag attr-value punctuation" style="color:rgb(153, 76, 195)">&quot;</span><span class="token tag punctuation" style="color:rgb(153, 76, 195)">&gt;</span><span class="token plain">[DETAIL]</span><span class="token tag punctuation" style="color:rgb(153, 76, 195)">&lt;/</span><span class="token tag" style="color:rgb(153, 76, 195)">a</span><span class="token tag punctuation" style="color:rgb(153, 76, 195)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(153, 76, 195)">&lt;</span><span class="token tag" style="color:rgb(153, 76, 195)">hr</span><span class="token tag punctuation" style="color:rgb(153, 76, 195)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  ...</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">{% endblock content %}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><br><ul><li>좋아요 버튼 클릭 후 확인</li></ul><br><h2 class="anchor anchorWithStickyNavbar_y2LR" id="profile-page">Profile Page<a aria-hidden="true" class="hash-link" href="#profile-page" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_y2LR" id="profile-page-작성">Profile Page 작성<a aria-hidden="true" class="hash-link" href="#profile-page-작성" title="Direct link to heading">​</a></h3><ul><li>자연스로운 follow 흐름을 위한 회원 프로필 페이지 작성하기</li></ul><br><ul><li>url 작성</li></ul><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><pre tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic"># accounts/urls.py</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">urlpatterns </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    path</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;&lt;username&gt;/&#x27;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> views</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">profile</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> name</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;profile&#x27;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><br><ul><li>profile view 함수 작성</li></ul><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><pre tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic"># accounts/views.py</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">from</span><span class="token plain"> django</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">shortcuts </span><span class="token keyword" style="color:rgb(12, 150, 155)">import</span><span class="token plain"> get_object_or_404</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> redirect</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> render</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">from</span><span class="token plain"> django</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">contrib</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">auth </span><span class="token keyword" style="color:rgb(12, 150, 155)">import</span><span class="token plain"> get_user_model</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">profile</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">request</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> username</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    person </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> get_object_or_404</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">get_user_model</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> username</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain">username</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    context </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;person&#x27;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"> person</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(153, 76, 195)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">return</span><span class="token plain"> render</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">request</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;accounts/profile.html&#x27;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> context</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><br><ul><li>profile 페이지 작성</li></ul><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI html"><pre tabindex="0" class="prism-code language-html codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">&lt;!-- accounts/profile.html --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">{% extends &#x27;base.html&#x27; %}</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">{% block content %}</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token tag punctuation" style="color:rgb(153, 76, 195)">&lt;</span><span class="token tag" style="color:rgb(153, 76, 195)">h1</span><span class="token tag punctuation" style="color:rgb(153, 76, 195)">&gt;</span><span class="token plain">{{ person.username }}의 프로필 페이지</span><span class="token tag punctuation" style="color:rgb(153, 76, 195)">&lt;/</span><span class="token tag" style="color:rgb(153, 76, 195)">h1</span><span class="token tag punctuation" style="color:rgb(153, 76, 195)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token tag punctuation" style="color:rgb(153, 76, 195)">&lt;</span><span class="token tag" style="color:rgb(153, 76, 195)">hr</span><span class="token tag punctuation" style="color:rgb(153, 76, 195)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token tag punctuation" style="color:rgb(153, 76, 195)">&lt;</span><span class="token tag" style="color:rgb(153, 76, 195)">h2</span><span class="token tag punctuation" style="color:rgb(153, 76, 195)">&gt;</span><span class="token plain">{{ person.username }}가 작성한 게시글</span><span class="token tag punctuation" style="color:rgb(153, 76, 195)">&lt;/</span><span class="token tag" style="color:rgb(153, 76, 195)">h2</span><span class="token tag punctuation" style="color:rgb(153, 76, 195)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  {% for article in person.article_set.all %}</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(153, 76, 195)">&lt;</span><span class="token tag" style="color:rgb(153, 76, 195)">div</span><span class="token tag punctuation" style="color:rgb(153, 76, 195)">&gt;</span><span class="token plain">{{ article.title }}</span><span class="token tag punctuation" style="color:rgb(153, 76, 195)">&lt;/</span><span class="token tag" style="color:rgb(153, 76, 195)">div</span><span class="token tag punctuation" style="color:rgb(153, 76, 195)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  {% endfor %}</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token tag punctuation" style="color:rgb(153, 76, 195)">&lt;</span><span class="token tag" style="color:rgb(153, 76, 195)">hr</span><span class="token tag punctuation" style="color:rgb(153, 76, 195)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token tag punctuation" style="color:rgb(153, 76, 195)">&lt;</span><span class="token tag" style="color:rgb(153, 76, 195)">h2</span><span class="token tag punctuation" style="color:rgb(153, 76, 195)">&gt;</span><span class="token plain">{{ person.username }}가 작성한 댓글</span><span class="token tag punctuation" style="color:rgb(153, 76, 195)">&lt;/</span><span class="token tag" style="color:rgb(153, 76, 195)">h2</span><span class="token tag punctuation" style="color:rgb(153, 76, 195)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  {% for comment in person.comment_set.all %}</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(153, 76, 195)">&lt;</span><span class="token tag" style="color:rgb(153, 76, 195)">div</span><span class="token tag punctuation" style="color:rgb(153, 76, 195)">&gt;</span><span class="token plain">{{ comment.content }}</span><span class="token tag punctuation" style="color:rgb(153, 76, 195)">&lt;/</span><span class="token tag" style="color:rgb(153, 76, 195)">div</span><span class="token tag punctuation" style="color:rgb(153, 76, 195)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  {% endfor %}</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token tag punctuation" style="color:rgb(153, 76, 195)">&lt;</span><span class="token tag" style="color:rgb(153, 76, 195)">hr</span><span class="token tag punctuation" style="color:rgb(153, 76, 195)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token tag punctuation" style="color:rgb(153, 76, 195)">&lt;</span><span class="token tag" style="color:rgb(153, 76, 195)">h2</span><span class="token tag punctuation" style="color:rgb(153, 76, 195)">&gt;</span><span class="token plain">{{ person.username }}가 좋아요를 누른 게시글</span><span class="token tag punctuation" style="color:rgb(153, 76, 195)">&lt;/</span><span class="token tag" style="color:rgb(153, 76, 195)">h2</span><span class="token tag punctuation" style="color:rgb(153, 76, 195)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  {% for article in person.like_articles.all %}</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(153, 76, 195)">&lt;</span><span class="token tag" style="color:rgb(153, 76, 195)">div</span><span class="token tag punctuation" style="color:rgb(153, 76, 195)">&gt;</span><span class="token plain">{{ article.title }}</span><span class="token tag punctuation" style="color:rgb(153, 76, 195)">&lt;/</span><span class="token tag" style="color:rgb(153, 76, 195)">div</span><span class="token tag punctuation" style="color:rgb(153, 76, 195)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  {% endfor %}</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token tag punctuation" style="color:rgb(153, 76, 195)">&lt;</span><span class="token tag" style="color:rgb(153, 76, 195)">a</span><span class="token tag" style="color:rgb(153, 76, 195)"> </span><span class="token tag attr-name" style="color:rgb(72, 118, 214);font-style:italic">href</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(153, 76, 195)">=</span><span class="token tag attr-value punctuation" style="color:rgb(153, 76, 195)">&quot;</span><span class="token tag attr-value" style="color:rgb(153, 76, 195)">{% url </span><span class="token tag attr-value punctuation" style="color:rgb(153, 76, 195)">&#x27;</span><span class="token tag attr-value" style="color:rgb(153, 76, 195)">articles:index</span><span class="token tag attr-value punctuation" style="color:rgb(153, 76, 195)">&#x27;</span><span class="token tag attr-value" style="color:rgb(153, 76, 195)"> %}</span><span class="token tag attr-value punctuation" style="color:rgb(153, 76, 195)">&quot;</span><span class="token tag punctuation" style="color:rgb(153, 76, 195)">&gt;</span><span class="token plain">[back]</span><span class="token tag punctuation" style="color:rgb(153, 76, 195)">&lt;/</span><span class="token tag" style="color:rgb(153, 76, 195)">a</span><span class="token tag punctuation" style="color:rgb(153, 76, 195)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  </span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">{% endblock content %}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><br><ul><li>base 페이지에 프로필 링크 작성</li></ul><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI html"><pre tabindex="0" class="prism-code language-html codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">&lt;!-- base.html --&gt;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token tag punctuation" style="color:rgb(153, 76, 195)">&lt;</span><span class="token tag" style="color:rgb(153, 76, 195)">body</span><span class="token tag punctuation" style="color:rgb(153, 76, 195)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token tag punctuation" style="color:rgb(153, 76, 195)">&lt;</span><span class="token tag" style="color:rgb(153, 76, 195)">div</span><span class="token tag" style="color:rgb(153, 76, 195)"> </span><span class="token tag attr-name" style="color:rgb(72, 118, 214);font-style:italic">class</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(153, 76, 195)">=</span><span class="token tag attr-value punctuation" style="color:rgb(153, 76, 195)">&quot;</span><span class="token tag attr-value" style="color:rgb(153, 76, 195)">container</span><span class="token tag attr-value punctuation" style="color:rgb(153, 76, 195)">&quot;</span><span class="token tag punctuation" style="color:rgb(153, 76, 195)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    {% if request.user.is_authenticated %}</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">      </span><span class="token tag punctuation" style="color:rgb(153, 76, 195)">&lt;</span><span class="token tag" style="color:rgb(153, 76, 195)">h3</span><span class="token tag punctuation" style="color:rgb(153, 76, 195)">&gt;</span><span class="token plain">Hello, {{ user.username }}</span><span class="token tag punctuation" style="color:rgb(153, 76, 195)">&lt;/</span><span class="token tag" style="color:rgb(153, 76, 195)">h3</span><span class="token tag punctuation" style="color:rgb(153, 76, 195)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">      </span><span class="token tag punctuation" style="color:rgb(153, 76, 195)">&lt;</span><span class="token tag" style="color:rgb(153, 76, 195)">a</span><span class="token tag" style="color:rgb(153, 76, 195)"> </span><span class="token tag attr-name" style="color:rgb(72, 118, 214);font-style:italic">href</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(153, 76, 195)">=</span><span class="token tag attr-value punctuation" style="color:rgb(153, 76, 195)">&quot;</span><span class="token tag attr-value" style="color:rgb(153, 76, 195)">{% url </span><span class="token tag attr-value punctuation" style="color:rgb(153, 76, 195)">&#x27;</span><span class="token tag attr-value" style="color:rgb(153, 76, 195)">accounts:profile</span><span class="token tag attr-value punctuation" style="color:rgb(153, 76, 195)">&#x27;</span><span class="token tag attr-value" style="color:rgb(153, 76, 195)"> user.username %}</span><span class="token tag attr-value punctuation" style="color:rgb(153, 76, 195)">&quot;</span><span class="token tag punctuation" style="color:rgb(153, 76, 195)">&gt;</span><span class="token plain">내 프로필</span><span class="token tag punctuation" style="color:rgb(153, 76, 195)">&lt;/</span><span class="token tag" style="color:rgb(153, 76, 195)">a</span><span class="token tag punctuation" style="color:rgb(153, 76, 195)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">      ...</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><br><ul><li>index 페이지에 프로필 링크 작성</li></ul><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI django"><pre tabindex="0" class="prism-code language-django codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token plain">&lt;!-- articles/index.html --&gt;</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">&lt;p&gt;작성자 : </span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  &lt;a href=&quot;{% url &#x27;accounts:profile&#x27; article.user.username %}&quot;&gt;{{ article.user }}&lt;/a&gt;</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">&lt;/p&gt;</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><br><h2 class="anchor anchorWithStickyNavbar_y2LR" id="follow">Follow<a aria-hidden="true" class="hash-link" href="#follow" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_y2LR" id="follow-구현">Follow 구현<a aria-hidden="true" class="hash-link" href="#follow-구현" title="Direct link to heading">​</a></h3><ul><li>ManyToManyField 작성 후 마이그레이션</li></ul><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><pre tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic"># accounts/models.py</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">from</span><span class="token plain"> django</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">db </span><span class="token keyword" style="color:rgb(12, 150, 155)">import</span><span class="token plain"> models</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">from</span><span class="token plain"> django</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">contrib</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">auth</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">models </span><span class="token keyword" style="color:rgb(12, 150, 155)">import</span><span class="token plain"> AbstractUser</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(17, 17, 17)">User</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">AbstractUser</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    followings </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> models</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">ManyToManyField</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;self&#x27;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> symmetrical</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token boolean" style="color:rgb(188, 84, 84)">False</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> related_name</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;followers&#x27;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain">   </span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI bash"><pre tabindex="0" class="prism-code language-bash codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token plain">$ python manage.py makemigrations</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">$ python manage.py migrate</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><br><ul><li>생성된 중개 테이블 확인</li></ul><br><ul><li>url 작성</li></ul><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><pre tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic"># accounts/urls.py</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">urlpatterns </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(153, 76, 195)">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    path</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;&lt;int:user_pk&gt;/follow/&#x27;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> views</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">follow</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> name</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;follow&#x27;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token punctuation" style="color:rgb(153, 76, 195)">]</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><br><ul><li>follow view 함수 작성</li></ul><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><pre tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic"># accounts/views.py</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token decorator annotation punctuation" style="color:rgb(153, 76, 195)">@require_POST</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">follow</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">request</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> user_pk</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">if</span><span class="token plain"> request</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">user</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">is_authenticated</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">        person </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> get_object_or_404</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">get_user_model</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> pk</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain">user_pk</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic"># 너와 내가 다른 사람이여야 팔로우를 진행할 수 있음</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token keyword" style="color:rgb(12, 150, 155)">if</span><span class="token plain"> person </span><span class="token operator" style="color:rgb(12, 150, 155)">!=</span><span class="token plain"> request</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">user</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">            </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic"># 내가 상대방(person)의 팔로워 목록에 있다면</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">            </span><span class="token keyword" style="color:rgb(12, 150, 155)">if</span><span class="token plain"> person</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">followers</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token builtin" style="color:rgb(72, 118, 214)">filter</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">pk</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain">request</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">user</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">pk</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">exists</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">                person</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">followers</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">remove</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">request</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">user</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">            </span><span class="token keyword" style="color:rgb(12, 150, 155)">else</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">            </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic"># 팔로우</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">                person</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">followers</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">followers</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">add</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">request</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">user</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token keyword" style="color:rgb(12, 150, 155)">return</span><span class="token plain"> redirect</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;accounts:profile&#x27;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> you</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">username</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">return</span><span class="token plain"> redirect</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;accounts:login&#x27;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI python"><pre tabindex="0" class="prism-code language-python codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic"># 혹은</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token decorator annotation punctuation" style="color:rgb(153, 76, 195)">@require_POST</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain"></span><span class="token keyword" style="color:rgb(12, 150, 155)">def</span><span class="token plain"> </span><span class="token function" style="color:rgb(153, 76, 195);font-style:italic">follow</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">request</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> user_pk</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">if</span><span class="token plain"> request</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">user</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">is_authenticated</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">        me </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> request</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">user</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">        you </span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain"> get_object_or_404</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">get_user_model</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> pk</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain">user_pk</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic"># 너와 내가 다른 사람이여야 팔로우를 진행할 수 있음</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic"># 나 자신은 팔로우해서는 안됨</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token keyword" style="color:rgb(12, 150, 155)">if</span><span class="token plain"> me </span><span class="token operator" style="color:rgb(12, 150, 155)">!=</span><span class="token plain"> you</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">            </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic"># 내가 상대방(person)의 팔로워 목록에 있다면</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">            </span><span class="token keyword" style="color:rgb(12, 150, 155)">if</span><span class="token plain"> you</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">followers</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token builtin" style="color:rgb(72, 118, 214)">filter</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">pk</span><span class="token operator" style="color:rgb(12, 150, 155)">=</span><span class="token plain">me</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">pk</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">exists</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">            </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic"># 언팔로우</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">                you</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">followers</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">remove</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">me</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">            </span><span class="token keyword" style="color:rgb(12, 150, 155)">else</span><span class="token punctuation" style="color:rgb(153, 76, 195)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">            </span><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic"># 팔로우</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">                you</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">followers</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">add</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token plain">me</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token keyword" style="color:rgb(12, 150, 155)">return</span><span class="token plain"> redirect</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;accounts:profile&#x27;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">,</span><span class="token plain"> you</span><span class="token punctuation" style="color:rgb(153, 76, 195)">.</span><span class="token plain">username</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token keyword" style="color:rgb(12, 150, 155)">return</span><span class="token plain"> redirect</span><span class="token punctuation" style="color:rgb(153, 76, 195)">(</span><span class="token string" style="color:rgb(72, 118, 214)">&#x27;accounts:login&#x27;</span><span class="token punctuation" style="color:rgb(153, 76, 195)">)</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><br><ul><li>profile 페이지에 팔로우와 언팔로우 버튼 작성<ol><li>팔로잉 수 / 팔로워 수 출력</li><li>자기 자신을 팔로우할 수 없음</li></ol></li></ul><div class="codeBlockContainer_J+bg"><div class="codeBlockContent_csEI html"><pre tabindex="0" class="prism-code language-html codeBlock_rtdJ thin-scrollbar" style="color:#403f53;background-color:#FBFBFB"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#403f53"><span class="token comment" style="color:rgb(152, 159, 177);font-style:italic">&lt;!-- accounts/profile.html --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">{% extends &#x27;base.html&#x27; %}</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">{% block content %}</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  </span><span class="token tag punctuation" style="color:rgb(153, 76, 195)">&lt;</span><span class="token tag" style="color:rgb(153, 76, 195)">h1</span><span class="token tag punctuation" style="color:rgb(153, 76, 195)">&gt;</span><span class="token plain">{{ person.username }}의 프로필 페이지</span><span class="token tag punctuation" style="color:rgb(153, 76, 195)">&lt;/</span><span class="token tag" style="color:rgb(153, 76, 195)">h1</span><span class="token tag punctuation" style="color:rgb(153, 76, 195)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  {% with followings=person.followings.all followers=person.followers.all %}</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(153, 76, 195)">&lt;</span><span class="token tag" style="color:rgb(153, 76, 195)">div</span><span class="token tag punctuation" style="color:rgb(153, 76, 195)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">      </span><span class="token tag punctuation" style="color:rgb(153, 76, 195)">&lt;</span><span class="token tag" style="color:rgb(153, 76, 195)">div</span><span class="token tag punctuation" style="color:rgb(153, 76, 195)">&gt;</span><span class="token plain">팔로잉 수 : {{ followings|length }} / 팔로워 수 : {{ followers|length }}</span><span class="token tag punctuation" style="color:rgb(153, 76, 195)">&lt;/</span><span class="token tag" style="color:rgb(153, 76, 195)">div</span><span class="token tag punctuation" style="color:rgb(153, 76, 195)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    </span><span class="token tag punctuation" style="color:rgb(153, 76, 195)">&lt;/</span><span class="token tag" style="color:rgb(153, 76, 195)">div</span><span class="token tag punctuation" style="color:rgb(153, 76, 195)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    {% if user != person %}</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">      </span><span class="token tag punctuation" style="color:rgb(153, 76, 195)">&lt;</span><span class="token tag" style="color:rgb(153, 76, 195)">div</span><span class="token tag punctuation" style="color:rgb(153, 76, 195)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(153, 76, 195)">&lt;</span><span class="token tag" style="color:rgb(153, 76, 195)">form</span><span class="token tag" style="color:rgb(153, 76, 195)"> </span><span class="token tag attr-name" style="color:rgb(72, 118, 214);font-style:italic">action</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(153, 76, 195)">=</span><span class="token tag attr-value punctuation" style="color:rgb(153, 76, 195)">&quot;</span><span class="token tag attr-value" style="color:rgb(153, 76, 195)">{% url </span><span class="token tag attr-value punctuation" style="color:rgb(153, 76, 195)">&#x27;</span><span class="token tag attr-value" style="color:rgb(153, 76, 195)">accounts:follow</span><span class="token tag attr-value punctuation" style="color:rgb(153, 76, 195)">&#x27;</span><span class="token tag attr-value" style="color:rgb(153, 76, 195)"> person.pk %}</span><span class="token tag attr-value punctuation" style="color:rgb(153, 76, 195)">&quot;</span><span class="token tag" style="color:rgb(153, 76, 195)"> </span><span class="token tag attr-name" style="color:rgb(72, 118, 214);font-style:italic">method</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(153, 76, 195)">=</span><span class="token tag attr-value punctuation" style="color:rgb(153, 76, 195)">&quot;</span><span class="token tag attr-value" style="color:rgb(153, 76, 195)">POST</span><span class="token tag attr-value punctuation" style="color:rgb(153, 76, 195)">&quot;</span><span class="token tag punctuation" style="color:rgb(153, 76, 195)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">          {% csrf_token %}</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">          {% if user in followers %}</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(153, 76, 195)">&lt;</span><span class="token tag" style="color:rgb(153, 76, 195)">input</span><span class="token tag" style="color:rgb(153, 76, 195)"> </span><span class="token tag attr-name" style="color:rgb(72, 118, 214);font-style:italic">type</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(153, 76, 195)">=</span><span class="token tag attr-value punctuation" style="color:rgb(153, 76, 195)">&quot;</span><span class="token tag attr-value" style="color:rgb(153, 76, 195)">submit</span><span class="token tag attr-value punctuation" style="color:rgb(153, 76, 195)">&quot;</span><span class="token tag" style="color:rgb(153, 76, 195)"> </span><span class="token tag attr-name" style="color:rgb(72, 118, 214);font-style:italic">value</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(153, 76, 195)">=</span><span class="token tag attr-value punctuation" style="color:rgb(153, 76, 195)">&quot;</span><span class="token tag attr-value" style="color:rgb(153, 76, 195)">언팔로우</span><span class="token tag attr-value punctuation" style="color:rgb(153, 76, 195)">&quot;</span><span class="token tag punctuation" style="color:rgb(153, 76, 195)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">          {% else %}</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">            </span><span class="token tag punctuation" style="color:rgb(153, 76, 195)">&lt;</span><span class="token tag" style="color:rgb(153, 76, 195)">input</span><span class="token tag" style="color:rgb(153, 76, 195)"> </span><span class="token tag attr-name" style="color:rgb(72, 118, 214);font-style:italic">type</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(153, 76, 195)">=</span><span class="token tag attr-value punctuation" style="color:rgb(153, 76, 195)">&quot;</span><span class="token tag attr-value" style="color:rgb(153, 76, 195)">submit</span><span class="token tag attr-value punctuation" style="color:rgb(153, 76, 195)">&quot;</span><span class="token tag" style="color:rgb(153, 76, 195)"> </span><span class="token tag attr-name" style="color:rgb(72, 118, 214);font-style:italic">value</span><span class="token tag attr-value punctuation attr-equals" style="color:rgb(153, 76, 195)">=</span><span class="token tag attr-value punctuation" style="color:rgb(153, 76, 195)">&quot;</span><span class="token tag attr-value" style="color:rgb(153, 76, 195)">팔로우</span><span class="token tag attr-value punctuation" style="color:rgb(153, 76, 195)">&quot;</span><span class="token tag punctuation" style="color:rgb(153, 76, 195)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">          {% endif %}</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">        </span><span class="token tag punctuation" style="color:rgb(153, 76, 195)">&lt;/</span><span class="token tag" style="color:rgb(153, 76, 195)">form</span><span class="token tag punctuation" style="color:rgb(153, 76, 195)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">      </span><span class="token tag punctuation" style="color:rgb(153, 76, 195)">&lt;/</span><span class="token tag" style="color:rgb(153, 76, 195)">div</span><span class="token tag punctuation" style="color:rgb(153, 76, 195)">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">    {% endif %}</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">  {% endwith %}</span><br></span><span class="token-line" style="color:#403f53"><span class="token plain">...</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><br><ul><li>좋아요 버튼 클릭 후 테이블 확인</li></ul><br><h2 class="anchor anchorWithStickyNavbar_y2LR" id="마무리">마무리<a aria-hidden="true" class="hash-link" href="#마무리" title="Direct link to heading">​</a></h2><ul><li>ManyToManyField<ul><li>좋아요 기능 (Like)</li><li>Profile Page</li><li>팔로우 기능 (Follow)</li></ul></li></ul></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/TIL/docs/backend/Django/02-07"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« <!-- -->Model Relationship - 1:N</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/TIL/docs/backend/Django/02-09"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">REST API<!-- --> »</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#intro-병원-진료-기록-시스템" class="table-of-contents__link toc-highlight">Intro: 병원 진료 기록 시스템</a><ul><li><a href="#병원-진료-기록-시스템을-통한-mn-관계-학습" class="table-of-contents__link toc-highlight">병원 진료 기록 시스템을 통한 M:N 관계 학습</a></li><li><a href="#1n의-한계" class="table-of-contents__link toc-highlight">1:N의 한계</a></li><li><a href="#중개-모델" class="table-of-contents__link toc-highlight">중개 모델</a></li><li><a href="#manytomanyfield" class="table-of-contents__link toc-highlight">ManyToManyField</a></li><li><a href="#related_name" class="table-of-contents__link toc-highlight">related_name</a></li><li><a href="#중개-모델테이블-in-django" class="table-of-contents__link toc-highlight">중개 모델(테이블) in Django</a></li><li><a href="#요약" class="table-of-contents__link toc-highlight">요약</a></li></ul></li><li><a href="#manytomanyfield-1" class="table-of-contents__link toc-highlight">ManyToManyField</a><ul><li><a href="#개념-및-특징" class="table-of-contents__link toc-highlight">개념 및 특징</a></li><li><a href="#arguments" class="table-of-contents__link toc-highlight">Arguments</a></li><li><a href="#related-manager" class="table-of-contents__link toc-highlight">Related Manager</a></li><li><a href="#through--예시" class="table-of-contents__link toc-highlight">through  예시</a></li><li><a href="#데이터베이스에서의-표현" class="table-of-contents__link toc-highlight">데이터베이스에서의 표현</a></li><li><a href="#중개-테이블의-필드-생성-규칙" class="table-of-contents__link toc-highlight">중개 테이블의 필드 생성 규칙</a></li></ul></li><li><a href="#like" class="table-of-contents__link toc-highlight">Like</a><ul><li><a href="#like-구현" class="table-of-contents__link toc-highlight">Like 구현</a></li></ul></li><li><a href="#profile-page" class="table-of-contents__link toc-highlight">Profile Page</a><ul><li><a href="#profile-page-작성" class="table-of-contents__link toc-highlight">Profile Page 작성</a></li></ul></li><li><a href="#follow" class="table-of-contents__link toc-highlight">Follow</a><ul><li><a href="#follow-구현" class="table-of-contents__link toc-highlight">Follow 구현</a></li></ul></li><li><a href="#마무리" class="table-of-contents__link toc-highlight">마무리</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/TIL/docs/frontend/intro">Frontend</a></li><li class="footer__item"><a class="footer__link-item" href="/TIL/docs/backend/intro">Backend</a></li><li class="footer__item"><a class="footer__link-item" href="/TIL/docs/CS/intro">CS</a></li><li class="footer__item"><a class="footer__link-item" href="/TIL/docs/etc/intro">Etc</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/devpla/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://hing9u.tistory.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright 2023 Devpla. Built with Docusaurus💜</div></div></div></footer></div>
<script src="/TIL/assets/js/runtime~main.72d8d802.js"></script>
<script src="/TIL/assets/js/main.0c15651c.js"></script>
</body>
</html>